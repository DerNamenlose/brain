(this.webpackJsonpbrain=this.webpackJsonpbrain||[]).push([[0],{164:function(e,t,n){e.exports=n(238)},169:function(e,t,n){},170:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),s=(n(169),n(45)),i=n(13),l=n(68),u=(n(170),n(55)),p=n(27),d=n(274),m=n(275),f=n(5),b=n(303),g=n(278),v=n(59),h=n(270),E=n(242),k=n(280),y=n(281),j=n(282),O=n(283),x=n(298),w=n(286),C=n(287),S=n(276),D=n(277),P=n(279),T=n(137),N=n.n(T),B=n(140),I=n.n(B),F=n(78),A=n.n(F),L=n(138),R=n.n(L),M=n(139),V=n.n(M),z=n(302);function W(e){return r.a.createElement(h.a,Object.assign({startIcon:e.icon},e),r.a.createElement(z.a,{xsDown:!0},e.extended))}var q=n(84),_=n.n(q);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(p.a)({},t,n))}var U=new Date("9999-12-31").getTime();function Y(e){return t=function(e,t){return e.localeCompare(t)},e.sort(t).filter((function(e,n,a){return 0===n||0!==t(a[n-1],e)}));var t}var Z=function(e,t){return function(e,t,n){var a=!0,r=!1,o=void 0;try{for(var c,s=n[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var i=c.value,l=i(e),u=i(t);if(l!==u)return l>u?1:-1}}catch(p){r=!0,o=p}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return 0}(e,t,[function(e){return!!e.done},function(e){return e.due||U},function(e){return e.priority||"Z"},function(e){return e.title.toLocaleLowerCase()}])},$=n(72),H=n(73),K=function(){function e(){Object($.a)(this,e),this._results=[]}return Object(H.a)(e,[{key:"hasAnyError",value:function(){return 0!==this._results.length}},{key:"hasError",value:function(e){return-1!==this._results.findIndex((function(t){return t.field===e}))}},{key:"error",value:function(e){var t=this._results.find((function(t){return t.field===e}));return t&&t.message}},{key:"addError",value:function(e,t){this._results.push({field:e,message:t})}}]),e}(),Q=n(62),X=n(304);function ee(e,t){return 0===e.length||t&&t.reduce((function(t,n){return t||!!e.find((function(e){return e===n}))}),!1)}function te(e,t){return t.filter((function(t){return(e.showFutureStart||!t.start||t.start<=Date.now())&&!t.postponed&&(!t.contexts||0===t.contexts.length)}))}function ne(e){return e.filter((function(e){return!!e.postponed}))}function ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ae(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ae(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function oe(e,t,n){var a=re({},t);switch(a.tasks=Object(Q.a)(t.tasks),n.type){case"context":case"project":case"tag":a=function(e,t){var n=[];switch(t.type){case"context":n=Object(Q.a)(e.selectedContexts);break;case"project":n=Object(Q.a)(e.selectedProjects);break;case"tag":n=Object(Q.a)(e.selectedTags)}switch(t.subtype){case"select":n.push(t.name),n=Y(n);break;case"deselect":var a=n.findIndex((function(e){return e===t.name}));-1!==a&&n.splice(a,1)}switch(t.type){case"context":e.selectedContexts=n;break;case"project":e.selectedProjects=n;break;case"tag":e.selectedTags=n}return e}(a,n);break;case"task":a=function(e,t,n){switch(n.subtype){case"create":n.task.created=Date.now(),t.tasks.push(n.task),e.create(n.task);break;case"update":var a=t.tasks.findIndex((function(e){return e.id.equals(n.task.id)}));-1!==a&&t.tasks.splice(a,1,n.task),e.update(n.task);break;case"delete":var r=t.tasks.findIndex((function(e){return e.id.equals(n.task.id)}));-1!==r&&t.tasks.splice(r,1);break;case"load":t.tasks.push(n.task)}return t}(e,a,n);break;case"bulk":a=function(e,t){switch(t.subtype){case"load":e.tasks=e.tasks.concat(t.tasks)}return e}(a,n);break;case"due":a=function(e,t){return"deselect"===t.subtype?e.dueIn=void 0:e.dueIn=t.value,e}(a,n);break;case"config":a=function(e,t,n){return t.config=re({},t.config,Object(p.a)({},n.setting,n.value)),e.putConfig(t.config),t}(e,a,n);break;case"loadConfig":a.config=n.config}return a.contexts=Y(a.tasks.filter((function(e){return!e.done})).flatMap((function(e){return e.contexts||[]}))),a.projects=function(e){return Y(e.filter((function(e){return!e.done})).flatMap((function(e){return e.projects||[]})))}(a.tasks),a.tags=function(e){return Y(e.filter((function(e){return!e.done})).flatMap((function(e){return e.tags||[]})))}(a.tasks),a.inboxEmpty=0===te(a.config,a.tasks).length,a.somedayMaybeEmpty=0===ne(a.tasks).length,a}var ce=r.a.createContext((function(e){})),se=r.a.createContext({});function ie(e){var t=new Date(e);return t&&t.toISOString().slice(0,10)}function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var pe=Object(d.a)((function(e){return Object(m.a)({buttons:{marginLeft:"auto",marginRight:"auto",marginTop:e.spacing(2)},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,margin:"auto",padding:e.spacing(1)}})})),de=Object(f.a)({root:{backgroundColor:S.a[500]}})(W),me=Object(f.a)({root:{backgroundColor:D.a[500]}})(W);function fe(e){return r.a.createElement(b.a,{open:e.open,"aria-labelledby":"dialog-title"},r.a.createElement(g.a,{id:"dialog-title"},"Activate task?"),r.a.createElement(v.a,null,"This task is currently postponed and will only be visible in Someday/Maybe. Activate it?"),r.a.createElement(h.a,{onClick:function(){return e.onClose(!0)}},"Activate"),r.a.createElement(h.a,{onClick:function(){return e.onClose(!1)}},"Leave postponed"))}function be(e){var t=new K;return e.title&&""!==e.title||t.addError("title","Task title is required"),t}function ge(e){var t=Object(f.a)((function(t){return{root:{backgroundColor:e.task.done?t.palette.grey[500]:P.a[500],"& .stateText":{textDecoration:e.task.done?"line-through":"none"},margin:t.spacing(1)}}}))(h.a);return r.a.createElement(t,{variant:"contained",color:"primary",onClick:e.onClick},r.a.createElement("span",{className:"stateText"},"Task is ",e.task.done?"done. ":"open. "),r.a.createElement("span",null,e.task.done?"Reopen?":"Finish?"))}function ve(e){var t=pe(),n=Object(a.useState)(ue({},e.task)),o=Object(s.a)(n,2),c=o[0],i=o[1],l=Object(a.useState)(new K),u=Object(s.a)(l,2),p=u[0],d=u[1],m=Object(a.useState)(!1),f=Object(s.a)(m,2),b=f[0],g=f[1],v=function(e){return function(t){i(J(c,e,t.target.value))}};return r.a.createElement(se.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,e.isNew?"Create":"Edit"," task"),p.hasAnyError()&&r.a.createElement(E.a,{className:t.error},"Could not save task."),r.a.createElement(k.a,null,r.a.createElement(k.a,{required:!0,error:p.hasError("title")},r.a.createElement(y.a,{htmlFor:"title"},"Title"),r.a.createElement(j.a,{id:"title",placeholder:"Task title",value:c.title||"",onChange:v("title")}),p.hasError("title")&&r.a.createElement(O.a,null,p.error("title"))),r.a.createElement(ge,{task:c,onClick:function(){return i(ue({},c,{done:!c.done}))}}),r.a.createElement(k.a,null,r.a.createElement(y.a,{htmlFor:"Description"},"Description"),r.a.createElement(j.a,{id:"description",multiline:!0,value:c.description||"",placeholder:"Description",onChange:v("description")})),r.a.createElement(_.a,{label:"Contexts",options:Y(n.contexts.concat(c.contexts||[])),SelectProps:{isCreatable:!0,isMulti:!0},fullWidth:!0,onChange:function(e){var t=J(c,"contexts",e);i(t)},values:c.contexts}),r.a.createElement(_.a,{label:"Projects",options:Y(n.projects.concat(c.projects||[])),SelectProps:{isCreatable:!0,isMulti:!0},fullWidth:!0,onChange:function(e){var t=J(c,"projects",e);i(t)},values:c.projects}),r.a.createElement(_.a,{label:"Tags",options:Y(n.tags.concat(c.tags||[])),SelectProps:{isCreatable:!0,isMulti:!0},fullWidth:!0,onChange:function(e){var t=J(c,"tags",e);i(t)},values:c.tags}),r.a.createElement(k.a,null,"Start:",r.a.createElement("input",{id:"start",type:"date",value:c.start&&ie(c.start)||"",onChange:function(e){var t=J(c,"start",e.target.valueAsDate&&e.target.valueAsDate.getTime());i(t)}})),r.a.createElement(k.a,null,"Due:",r.a.createElement("input",{id:"due",type:"date",value:c.due&&ie(c.due)||"",onChange:function(e){var t=J(c,"due",e.target.valueAsDate&&e.target.valueAsDate.getTime());i(t)}})),r.a.createElement(k.a,null,r.a.createElement(y.a,{htmlFor:"priority"},"Priority"),r.a.createElement(x.a,{id:"priority",value:c.priority||" ",onChange:function(e){return i(J(c,"priority"," "===e.target.value?void 0:e.target.value))}},r.a.createElement(w.a,{value:" "},"[None]"),r.a.createElement(w.a,{value:"A"},"A"),r.a.createElement(w.a,{value:"B"},"B"),r.a.createElement(w.a,{value:"C"},"C"),r.a.createElement(w.a,{value:"D"},"D"),r.a.createElement(w.a,{value:"E"},"E"),r.a.createElement(w.a,{value:"F"},"F"))),r.a.createElement(C.a,{className:t.buttons},r.a.createElement(W,{icon:r.a.createElement(N.a,null),extended:"Save",color:"primary",variant:"contained","aria-label":"Save",onClick:function(){var t=be(c);t.hasAnyError()?d(t):e.onSave&&e.onSave(c)}}),r.a.createElement(me,{icon:c.postponed?r.a.createElement(R.a,null):r.a.createElement(A.a,null),extended:c.postponed?"Activate":"Postpone",color:"primary",variant:"contained","aria-label":c.postponed?"Activate":"Postpone",onClick:function(){var t=be(c);t.hasAnyError()?d(t):e.onPostpone&&e.onPostpone(c)}}),r.a.createElement(de,{icon:r.a.createElement(V.a,null),extended:"Skip task",color:"primary",variant:"contained","aria-label":"Skip task",onClick:function(){e.onSkip&&e.onSkip()},style:{display:e.canSkip?"inline-block":"none"}}),r.a.createElement(W,{icon:r.a.createElement(I.a,null),extended:"Cancel",color:"secondary",variant:"contained","aria-label":"Cancel",onClick:function(){return e.onCancel&&e.onCancel()}}))),r.a.createElement(fe,{open:b,onClose:function(t){t&&(c.postponed=!1),e.onSave&&e.onSave(c),g(!1)}}))}))}function he(e){var t=Object(i.f)(),n=Object(a.useContext)(ce);return r.a.createElement(ve,{task:e.task,isNew:e.isNew,onSave:function(a){n({type:"task",subtype:e.isNew?"create":"update",task:a}),t.goBack()},onCancel:function(){return t.goBack()},onPostpone:function(a){a.postponed=!a.postponed,n({type:"task",subtype:e.isNew?"create":"update",task:a}),t.goBack()}})}var Ee=n(14),ke=n.n(Ee),ye=n(29),je=n(102),Oe=n(142),xe=n.n(Oe);function we(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?we(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):we(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Se=function(){function e(){Object($.a)(this,e)}return Object(H.a)(e,[{key:"loadTasks",value:function(){var e=Object(ye.a)(ke.a.mark((function e(){var t,n;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDb();case 2:return t=e.sent,e.next=5,t.transaction("tasks").objectStore("tasks").getAll();case 5:return n=e.sent,console.log("Loaded ".concat(n.length," stored tasks")),e.abrupt("return",n.map((function(e){return Ce({},e,{id:u.Guid.parse(e.id)})})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"create",value:function(){var t=Object(ye.a)(ke.a.mark((function t(n){var a,r,o;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.updateVersion(Ce({},n,{id:n.id.toString()})),t.next=3,this.openDb();case 3:return r=t.sent,o=r.transaction("tasks","readwrite"),t.next=7,o.objectStore("tasks").put(a);case 7:return t.next=9,o.done;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(ye.a)(ke.a.mark((function t(n){var a,r,o;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.updateVersion(Ce({},n,{id:n.id.toString()})),t.next=3,this.openDb();case 3:return r=t.sent,console.log("Updating",a),o=r.transaction("tasks","readwrite"),t.next=8,o.objectStore("tasks").put(a);case 8:return t.next=10,o.done;case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"config",value:function(){var e=Object(ye.a)(ke.a.mark((function e(){var t;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDb();case 2:return t=e.sent,e.next=5,t.transaction("config").objectStore("config").get("global");case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={id:"global",showDone:!1,showFutureStart:!1};case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"putConfig",value:function(){var e=Object(ye.a)(ke.a.mark((function e(t){var n,a;return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDb();case 2:return n=e.sent,a=Ce({},t,{id:"global"}),e.next=6,n.transaction("config","readwrite").objectStore("config").put(a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openDb",value:function(){var t=Object(ye.a)(ke.a.mark((function t(){var n;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(je.a)("tasks",3,{upgrade:function(){var t=Object(ye.a)(ke.a.mark((function t(n,a,r,o){return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Upgrading database to version ".concat(r)),a<1&&e.upgradeV1(n),a<2&&e.upgradeV2(o),a<3&&e.upgradeV3(n),console.log("Finished.");case 5:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}],[{key:"updateVersion",value:function(e){return Ce({},e,{version:(e.version||0)+1,hash:xe()(e)})}},{key:"upgradeV1",value:function(){var e=Object(ye.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Creating the object store."),t.createObjectStore("tasks",{keyPath:"id"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"upgradeV2",value:function(){var t=Object(ye.a)(ke.a.mark((function t(n){var a,r,o,c,s,i,l,u,p;return ke.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Transforming all existing objects to v2 schema"),t.next=3,Object(je.a)("tasks",3);case 3:return a=t.sent,t.next=6,a.transaction("tasks","readonly").objectStore("tasks").getAll();case 6:r=t.sent,a.close(),o=!0,c=!1,s=void 0,t.prev=11,i=r[Symbol.iterator]();case 13:if(o=(l=i.next()).done){t.next=21;break}return u=l.value,p=Ce({},u,{due:u.due&&u.due.getTime(),created:u.created&&u.created.getTime()||Date.now(),version:0,hash:""}),t.next=18,n.objectStore("tasks").put(e.updateVersion(p));case 18:o=!0,t.next=13;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(11),c=!0,s=t.t0;case 27:t.prev=27,t.prev=28,o||null==i.return||i.return();case 30:if(t.prev=30,!c){t.next=33;break}throw s;case 33:return t.finish(30);case 34:return t.finish(27);case 35:case"end":return t.stop()}}),t,null,[[11,23,27,35],[28,,30,34]])})));return function(e){return t.apply(this,arguments)}}()},{key:"upgradeV3",value:function(){var e=Object(ye.a)(ke.a.mark((function e(t){return ke.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.createObjectStore("config",{keyPath:"id"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),De=n(273),Pe=n(299),Te=n(294),Ne=n(295),Be=n(148),Ie=n.n(Be),Fe=n(147),Ae=n.n(Fe),Le=n(149),Re=n.n(Le),Me=n(156),Ve=n(241),ze=n(292),We=n(293),qe=n(79),_e=n.n(qe),Ge=n(153),Je=n(288),Ue=n(289);function Ye(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),o=n[0],c=n[1];return r.a.createElement(a.Fragment,null,r.a.createElement(W,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",icon:e.icon,extended:e.text,onClick:function(e){return c(e.currentTarget)},disabled:0===e.entries.length}),r.a.createElement(Ge.a,{id:"contexts-menu",keepMounted:!0,anchorEl:o,open:Boolean(o),onClose:function(e){return c(null)}},e.entries.map((function(t,n){return r.a.createElement(w.a,{key:t.text,onClick:function(){e.onChange&&e.onChange(t),c(null)},selected:t.selected},r.a.createElement(Je.a,null,e.icon),r.a.createElement(Ue.a,null,t.text))}))))}var Ze=n(290);function $e(){var e=Object(a.useContext)(ce);return r.a.createElement(se.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:0===t.selectedContexts.length,color:"secondary",variant:"dot"},r.a.createElement(_e.a,null)),text:"Contexts",entries:t.contexts.map((function(e){return{text:e,selected:!!t.selectedContexts.find((function(t){return t===e}))}})),onChange:function(t){e({type:"context",subtype:t.selected?"deselect":"select",name:t.text})}})}))}var He=n(80),Ke=n.n(He);function Qe(){var e=Object(a.useContext)(ce);return r.a.createElement(se.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:0===t.selectedProjects.length,color:"secondary",variant:"dot"},r.a.createElement(Ke.a,null)),text:"Projects",entries:t.projects.map((function(e){return{text:e,selected:!!t.selectedProjects.find((function(t){return t===e}))}})),onChange:function(t){e({type:"project",subtype:t.selected?"deselect":"select",name:t.text})}})}))}var Xe=n(81),et=n.n(Xe);function tt(){var e=Object(a.useContext)(ce);return r.a.createElement(se.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:0===t.selectedTags.length,color:"secondary",variant:"dot"},r.a.createElement(et.a,null)),text:"Tags",entries:t.tags.map((function(e){return{text:e,selected:!!t.selectedTags.find((function(t){return t===e}))}})),onChange:function(t){e({type:"tag",subtype:t.selected?"deselect":"select",name:t.text})}})}))}var nt=n(16),at=n(285),rt=n(99),ot=n(145),ct=n.n(ot),st=n(143),it=n.n(st),lt=n(144),ut=n.n(lt),pt=n(83),dt=n(291),mt=n(82),ft=n(297),bt=Object(d.a)((function(e){return Object(m.a)({done:{textDecoration:"line-through",color:e.palette.grey[500]},metaEntry:{marginLeft:"0.5em",whiteSpace:"nowrap"},metaText:{whiteSpace:"normal"},dueToday:{color:e.palette.primary.main},overdue:{color:e.palette.error.main},priority:{borderRadius:"50%",width:"1em",height:"1em",display:"inline-block",textAlign:"center",paddingBottom:e.spacing(.5),paddingLeft:e.spacing(.25),paddingRight:e.spacing(.25)},prioA:{backgroundColor:pt.a[500],color:e.palette.getContrastText(pt.a[500])},prioB:{backgroundColor:S.a[500],color:e.palette.getContrastText(S.a[500])},prioC:{backgroundColor:D.a[500],color:e.palette.getContrastText(D.a[500])},prioD:{backgroundColor:P.a[500],color:e.palette.getContrastText(P.a[500])},prioE:{backgroundColor:dt.a[200],color:e.palette.getContrastText(dt.a[200])},prioF:{backgroundColor:mt.a[500],color:e.palette.getContrastText(mt.a[500])}})}));function gt(e){var t=bt(),n=new Date(Date.now()).toISOString().slice(0,10),a=e.due&&ie(e.due);return!a||a>n?"":a===n?t.dueToday:t.overdue}function vt(e){var t=bt(),n=void 0;switch(e.prio){case"A":n=t.prioA;break;case"B":n=t.prioB;break;case"C":n=t.prioC;break;case"D":n=t.prioD;break;case"E":n=t.prioE;break;case"F":n=t.prioF}return r.a.createElement("span",{className:"".concat(t.priority," ").concat(n)},e.prio)}function ht(e){var t=bt(),n=Object(ft.a)(e.created,new Date);return e.created&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(it.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Age"),r.a.createElement("span",{className:t.metaText},n," ago"))}function Et(e){var t=bt();return r.a.createElement(a.Fragment,null,e.task.priority&&r.a.createElement(vt,{prio:e.task.priority}),e.task.contexts&&0!==e.task.contexts.length&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(_e.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Contexts"),r.a.createElement("span",{className:t.metaText},e.task.contexts.join(", ")))," ",e.task.projects&&0!==e.task.projects.length&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(Ke.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Projects"),e.task.projects.join(", "))," ",e.task.tags&&0!==e.task.tags.length&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(et.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Tags"),r.a.createElement("span",{className:t.metaText},e.task.tags.join(", ")))," ",e.task.start&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(ut.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Start date"),r.a.createElement("span",{className:t.metaText},new Date(e.task.start).toLocaleDateString()))," ",e.task.due&&r.a.createElement("span",{className:"".concat(t.metaEntry," ").concat(gt(e.task))},r.a.createElement(ct.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Due date"),r.a.createElement("span",{className:t.metaText},new Date(e.task.due).toLocaleDateString()))," ",e.task.created&&r.a.createElement(ht,{created:new Date(e.task.created),task:e.task}))}function kt(e){var t=bt(),n=Object(i.f)();return r.a.createElement(rt.a,{button:!0,onClick:function(){return n.push("/task/".concat(e.task.id))}},r.a.createElement(Ue.a,{primary:e.task.title,secondary:r.a.createElement(Et,{task:e.task}),className:e.task.done&&t.done||void 0}))}function yt(e){return r.a.createElement(at.a,null,e.tasks.sort(Z).map((function(e){return r.a.createElement(kt,{key:e.id.toString(),task:e})})))}var jt=n(146),Ot=n.n(jt);function xt(){var e=Object(a.useContext)(ce);return r.a.createElement(se.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:void 0===t.dueIn,color:"secondary",variant:"dot"},r.a.createElement(Ot.a,null)),text:"Due",entries:[{text:"Overdue",selected:!(void 0===t.dueIn||0!==t.dueIn),value:0},{text:"Today",selected:!(void 0===t.dueIn||1!==t.dueIn),value:1},{text:"Next week",selected:!(void 0===t.dueIn||7!==t.dueIn),value:7},{text:"Next month",selected:!(void 0===t.dueIn||31!==t.dueIn),value:31}],onChange:function(t){e({type:"due",subtype:t.selected?"deselect":"select",value:t.value})}})}))}var wt=n(54),Ct=n.n(wt),St=Object(d.a)((function(e){return Object(m.a)({appBar:{top:"auto",bottom:0},search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(nt.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(nt.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(p.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}}),task:{margin:2},settings:{marginLeft:"auto",marginRight:0}})}));function Dt(){var e=St(),t=Object(i.f)();return r.a.createElement(se.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement(ze.a,{className:e.appBar},r.a.createElement(We.a,null,r.a.createElement($e,null),r.a.createElement(Qe,null),r.a.createElement(tt,null),r.a.createElement(xt,null),r.a.createElement(h.a,{className:e.settings,onClick:function(){return t.push("/config")}},r.a.createElement(Ct.a,{className:e.settings})))),r.a.createElement(yt,{tasks:(o=n.config,c=n.tasks,s=n.selectedContexts,i=n.selectedProjects,l=n.selectedTags,u=n.dueIn,c.filter((function(e){return!e.postponed&&!!e.contexts&&e.contexts.length>0&&(o.showDone||!e.done)&&(o.showFutureStart||!e.start||e.start<=Date.now())&&ee(s,e.contexts)&&ee(i,e.projects)&&ee(l,e.tags)&&(void 0===u||e.due&&Object(X.a)(e.due,new Date)<u)})))}));var o,c,s,i,l,u}))}var Pt=Object(d.a)((function(){return Object(m.a)({appBar:{top:"auto",bottom:0},settings:{marginLeft:"auto",marginRight:0}})}));function Tt(){var e=Pt(),t=Object(i.f)();return r.a.createElement(se.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement(yt,{tasks:te(n.config,n.tasks)}),r.a.createElement(ze.a,{className:e.appBar},r.a.createElement(We.a,null,r.a.createElement(h.a,{className:e.settings,onClick:function(){return t.push("/config")}},r.a.createElement(Ct.a,{className:e.settings})))))}))}var Nt=Object(Me.a)((function(){return Object(Ve.a)({appBar:{top:"auto",bottom:0},settings:{marginLeft:"auto",marginRight:0}})}));function Bt(){var e=Nt(),t=Object(i.f)();return r.a.createElement(se.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement(yt,{tasks:ne(n.tasks)}),r.a.createElement(ze.a,{className:e.appBar},r.a.createElement(We.a,null,r.a.createElement(h.a,{className:e.settings,onClick:function(){return t.push("/config")}},r.a.createElement(Ct.a,{className:e.settings})))))}))}function It(e){return r.a.createElement(v.a,{component:"div",role:"tabpanel",id:"full-width-tabpanel-".concat(e.index)},e.children)}var Ft=Object(Me.a)((function(e){return Object(Ve.a)({addButton:{position:"fixed",zIndex:1,bottom:75,left:0,right:0,marginLeft:"auto",marginRight:10},tabs:{position:"fixed",top:0,left:0,width:"100%",zIndex:1},tabPanel:{position:"absolute",top:0,left:0,bottom:0,right:0,overflowY:"auto"},smallBorder:{marginTop:e.spacing(6),marginBottom:e.spacing(6)},normalBorder:{marginTop:e.spacing(9),marginBottom:e.spacing(8)}})}));function At(e){var t=Object(i.f)(),n=Ft(),a=Object(De.a)((function(e){return e.breakpoints.down("xs")}));return r.a.createElement(Pe.a,{variant:"fullWidth",indicatorColor:"primary",value:e.path,className:n.tabs},r.a.createElement(Te.a,{icon:r.a.createElement(Ae.a,null),label:a?void 0:"Tasks","aria-label":"Tasks",value:"/",onClick:function(e){return t.push("/")}}),r.a.createElement(Te.a,{icon:r.a.createElement(Ie.a,null),label:a?void 0:"Inbox","aria-label":"Inbox",disabled:e.inboxEmpty,value:"/inbox",onClick:function(e){return t.push("/inbox")}}),r.a.createElement(Te.a,{icon:r.a.createElement(A.a,null),label:a?void 0:"Someday/Maybe","aria-label":"Inbox",disabled:e.somedayMaybeEmpty,value:"/someday",onClick:function(e){return t.push("/someday")}}))}function Lt(){var e=Ft(),t=Object(De.a)((function(e){return e.breakpoints.down("xs")}));return r.a.createElement("div",{className:"".concat(e.tabPanel," ").concat(t?e.smallBorder:e.normalBorder)},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(It,{index:0},r.a.createElement(Dt,null))),r.a.createElement(i.a,{path:"/inbox"},r.a.createElement(It,{index:1},r.a.createElement(Tt,null))),r.a.createElement(i.a,{path:"/someday"},r.a.createElement(It,{index:2},r.a.createElement(Bt,null)))))}function Rt(){var e=Object(i.f)(),t=Ft();return r.a.createElement(se.Consumer,null,(function(n){return r.a.createElement(i.a,{render:function(o){return r.a.createElement(a.Fragment,null,r.a.createElement(At,{path:o.location.pathname,inboxEmpty:n.inboxEmpty,somedayMaybeEmpty:n.somedayMaybeEmpty}),r.a.createElement(Lt,null),r.a.createElement(Ne.a,{color:"secondary","aria-label":"add",className:t.addButton,onClick:function(){return e.push("/newTask")}},r.a.createElement(Re.a,null)))}})}))}var Mt=n(151),Vt=n(284),zt=n(296),Wt=n(300),qt=n(150),_t=n.n(qt),Gt=Object(Me.a)((function(e){return Object(Ve.a)({backButton:{marginLeft:0,marginRight:"auto"},backButtonRoot:{display:"flex"}})}));function Jt(){var e=Gt(),t=Object(a.useContext)(ce),n=Object(i.f)();return r.a.createElement(se.Consumer,null,(function(o){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:e.backButtonRoot},r.a.createElement(h.a,{className:e.backButton,onClick:function(){return n.goBack()}},r.a.createElement(_t.a,{fontSize:"large"}))),r.a.createElement("h1",null,"Configuration"),r.a.createElement(k.a,null,r.a.createElement(zt.a,{control:r.a.createElement(Wt.a,{id:"showDone",checked:o.config.showDone,onChange:function(e){return t({type:"config",setting:"showDone",value:e.target.checked})}}),label:"Show finished tasks"})),r.a.createElement(k.a,null,r.a.createElement(zt.a,{control:r.a.createElement(Wt.a,{id:"showFutureStart",checked:!!o.config.showFutureStart,onChange:function(e){return t({type:"config",setting:"showFutureStart",value:e.target.checked})}}),label:"Show tasks with a start date in the future"})))}))}function Ut(){var e=Object(i.g)().id,t=e&&u.Guid.parse(e),n=Object(a.useContext)(se),o=t&&n.tasks.find((function(e){return e.id.equals(t)}))||{id:u.Guid.create()};return r.a.createElement(he,{task:o})}var Yt=new Se,Zt=Object(Mt.a)({palette:{primary:P.a,secondary:pt.a}}),$t=function(){var e=Object(a.useReducer)(oe.bind(null,Yt),{tasks:[],contexts:[],projects:[],tags:[],selectedContexts:[],selectedProjects:[],selectedTags:[],config:{showDone:!1}}),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){Yt.loadTasks().then((function(e){return o({type:"bulk",subtype:"load",tasks:e})})),Yt.config().then((function(e){return o({type:"loadConfig",config:e})}))}),[]),r.a.createElement(l.a,null,r.a.createElement(ce.Provider,{value:o},r.a.createElement(se.Provider,{value:n},r.a.createElement(Vt.a,{theme:Zt},r.a.createElement("div",{className:"App"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:["/","/inbox","/someday"]},r.a.createElement(Rt,null)),r.a.createElement(i.a,{path:"/task/:id"},r.a.createElement(Ut,null)),r.a.createElement(i.a,{path:"/newTask"},r.a.createElement(he,{task:{id:u.Guid.create(),title:"",version:0,hash:""},isNew:!0})),r.a.createElement(i.a,{path:"/config"},r.a.createElement(Jt,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement($t,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[164,1,2]]]);
//# sourceMappingURL=main.f0d940bd.chunk.js.map