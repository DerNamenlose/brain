{"version":3,"sources":["components/ResponsiveButton.tsx","util/copyUpdater.ts","util/order.ts","util/ValidationResult.ts","util/Filter.ts","util/dispatcher.ts","model/GlobalState.ts","util/displayHelper.ts","components/TaskEditor.tsx","storage/LocalStorage.ts","components/FilterButton.tsx","components/ContextsButton.tsx","components/ProjectsButton.tsx","components/TagsButton.tsx","components/TaskListItem.tsx","components/TaskList.tsx","components/DueFilters.tsx","components/TaskOverview.tsx","components/Inbox.tsx","components/SomedayMaybe.tsx","components/MainView.tsx","components/ConfigEditor.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["ResponsiveButton","props","Button","startIcon","icon","Hidden","xsDown","extended","copyAndUpdate","object","field","newValue","maxDate","Date","getTime","sortAndUniqueString","strings","compare","s1","s2","localeCompare","sort","filter","value","index","elements","defaultTaskOrder","t1","t2","accessors","accessor","v1","v2","order","t","done","due","priority","title","toLocaleLowerCase","ValidationResult","_results","this","length","findIndex","result","find","message","push","matches","filterProperties","taskProperties","reduce","found","prop","fprop","overviewFilter","config","tasks","selectedContexts","selectedProjects","selectedTags","dueIn","today","setHours","setMinutes","setSeconds","setMilliseconds","task","postponed","contexts","showDone","showFutureStart","start","now","projects","tags","undefined","differenceInDays","isDueIn","inboxFilter","somedayMaybeFilter","storage","state","action","newState","type","items","subtype","name","idx","ctx","splice","handleFilterAction","created","create","updateIdx","id","equals","update","deleteIdx","handleTaskAction","concat","handleTaskBulkAction","handleDueFilterAction","setting","putConfig","handleConfigAction","flatMap","extractProjects","extractTags","inboxEmpty","somedayMaybeEmpty","Dispatcher","React","createContext","ev","GlobalState","toDateDisplay","input","date","toISOString","slice","useStyles","makeStyles","theme","createStyles","buttons","marginLeft","marginRight","marginTop","spacing","error","backgroundColor","palette","main","color","contrastText","margin","padding","SkipButton","withStyles","root","orange","PostponeButton","yellow","ActivationDialog","Dialog","open","aria-labelledby","DialogTitle","Typography","onClick","onClose","validate","addError","StateButton","StyledButton","grey","green","textDecoration","variant","className","TaskEditorControl","classes","useState","editedTask","setEditedTask","validation","setValidation","activationRequest","setActivationRequest","handleChange","target","Consumer","isNew","hasAnyError","Paper","FormControl","required","hasError","InputLabel","htmlFor","Input","placeholder","onChange","FormHelperText","multiline","description","label","options","SelectProps","isCreatable","isMulti","fullWidth","nv","values","valueAsDate","Select","MenuItem","ButtonGroup","aria-label","res","onSave","onPostpone","onSkip","style","display","canSkip","onCancel","activate","TaskEditor","history","useHistory","dispatch","useContext","goBack","LocalStorage","openDb","db","transaction","objectStore","getAll","console","log","map","Guid","parse","versionedTask","updateVersion","toString","tx","put","get","storedValue","openDB","upgrade","oldVersion","newVersion","upgradeV1","upgradeV2","upgradeV3","version","hash","createObjectStore","keyPath","oldDb","objects","close","newObject","FilterButton","anchorEl","setAnchorEl","aria-controls","aria-haspopup","text","currentTarget","disabled","entries","Menu","keepMounted","Boolean","entry","key","selected","ListItemIcon","ListItemText","ContextsButton","Badge","invisible","c","selectedEntry","ProjectsButton","project","p","TagsButton","tag","metaEntry","whiteSpace","metaText","dueToday","primary","overdue","borderRadius","width","height","textAlign","paddingBottom","paddingLeft","paddingRight","prioA","red","getContrastText","prioB","prioC","prioD","prioE","lightBlue","prioF","DueClass","PrioDisplay","prioClass","prio","AgeDisplay","age","formatDistance","fontSize","MetaDisplay","join","toLocaleDateString","TaskListItem","ListItem","button","secondary","TaskList","DueFilters","appBar","top","bottom","search","position","shape","fade","common","white","breakpoints","up","searchIcon","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","transition","transitions","settings","TaskOverview","AppBar","Toolbar","Inbox","SomedayMaybe","TabPanel","component","role","children","addButton","zIndex","left","right","tabs","tabPanel","overflowY","smallBorder","marginBottom","normalBorder","TabHeader","smallScreen","useMediaQuery","down","Tabs","indicatorColor","path","Tab","TabContent","exact","MainView","render","match","location","pathname","Fab","backButton","backButtonRoot","ConfigEditor","FormControlLabel","control","Checkbox","checked","FindTask","useParams","taskId","createMuiTheme","App","useReducer","bind","useEffect","loadTasks","then","Provider","ThemeProvider","window","hostname","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.68bce651.chunk.js","sourcesContent":["import React from 'react';\nimport { Button, Hidden } from '@material-ui/core';\nimport { ButtonProps } from '@material-ui/core/Button';\n\nexport interface ResponsiveButtonProps extends ButtonProps {\n    icon: JSX.Element;\n    extended: JSX.Element | string;\n}\n\nexport function ResponsiveButton(props: ResponsiveButtonProps) {\n    return (\n        <Button startIcon={props.icon} {...props}>\n            <Hidden xsDown>{props.extended}</Hidden>\n        </Button>\n    );\n}\n","export function copyAndUpdate<TObject, TField>(\n    object: TObject,\n    field: keyof TObject,\n    newValue: TField\n): TObject {\n    return {\n        ...object,\n        [field]: newValue\n    };\n}\n","import { Task } from 'brain-common';\n\nexport const maxDate = new Date('9999-12-31').getTime();\n\n/**\n * order objects by multiple fields\n *\n * @param t1 The first object\n * @param t2 The second object\n */\nexport function order<T>(t1: T, t2: T, accessors: ((obj: T) => any)[]) {\n    for (let accessor of accessors) {\n        const v1 = accessor(t1);\n        const v2 = accessor(t2);\n        if (v1 !== v2) {\n            return v1 > v2 ? 1 : -1;\n        }\n    }\n    return 0;\n}\n\n/**\n * Sort and array and make its entries unique\n * @param elements The array of strings to sort and make unique\n */\nexport function sortAndUnique<T>(\n    elements: T[],\n    compare: (e1: T, e2: T) => number\n): T[] {\n    return elements\n        .sort(compare)\n        .filter(\n            (value, index, elements) =>\n                index === 0 || compare(elements[index - 1], value) !== 0\n        );\n}\n\nexport function sortAndUniqueString(strings: string[]) {\n    return sortAndUnique(strings, (s1, s2) => s1.localeCompare(s2));\n}\n\nexport const defaultTaskOrder = (t1: Task, t2: Task) =>\n    order(t1, t2, [\n        t => !!t.done,\n        t => t.due || maxDate,\n        t => t.priority || 'Z',\n        t => t.title.toLocaleLowerCase()\n    ]);\n","export class ValidationResult {\n    private _results: { field: string; message: string }[] = [];\n\n    public hasAnyError(): boolean {\n        return this._results.length !== 0;\n    }\n\n    public hasError(field: string): boolean {\n        return this._results.findIndex(result => result.field === field) !== -1;\n    }\n\n    public error(field: string): string | undefined {\n        const result = this._results.find(result => result.field === field);\n        return result && result.message;\n    }\n\n    public addError(field: string, message: string) {\n        this._results.push({ field: field, message: message });\n    }\n}\n","import { Task } from 'brain-common';\nimport { differenceInDays } from 'date-fns/esm';\nimport { IGlobalConfig } from '../model/GlobalConfig';\n\nfunction matches(filterProperties: string[], taskProperties?: string[]) {\n    return (\n        filterProperties.length === 0 ||\n        (taskProperties &&\n            taskProperties.reduce(\n                (found: boolean, prop: string) =>\n                    found || !!filterProperties.find(fprop => fprop === prop),\n                false\n            ))\n    );\n}\n\nexport function isDueIn(task: Task, today: Date, dueIn?: number): boolean {\n    return (\n        dueIn === undefined ||\n        (!!task.due && differenceInDays(task.due, today) < dueIn)\n    );\n}\n\nexport function overviewFilter(\n    config: IGlobalConfig,\n    tasks: Task[],\n    selectedContexts: string[],\n    selectedProjects: string[],\n    selectedTags: string[],\n    dueIn?: number\n): Task[] {\n    const today = new Date();\n    today.setHours(0);\n    today.setMinutes(0);\n    today.setSeconds(0);\n    today.setMilliseconds(0);\n    return tasks.filter(task => {\n        return (\n            !task.postponed && // postponed tasks are by definition not visible\n            !!task.contexts && // only tasks that have a context are in the overview.\n            task.contexts.length > 0 && // Tasks without any contexts are in the inbox by definition\n            (config.showDone || !task.done) && // show done tasks only when requested by the config\n            (config.showFutureStart ||\n                !task.start ||\n                task.start <= Date.now()) && // show items depending on whether their start date has passed\n            matches(selectedContexts, task.contexts) &&\n            matches(selectedProjects, task.projects) &&\n            matches(selectedTags, task.tags) &&\n            isDueIn(task, today, dueIn)\n        );\n    });\n}\n\nexport function inboxFilter(config: IGlobalConfig, tasks: Task[]): Task[] {\n    return tasks.filter(task => {\n        return (\n            (config.showFutureStart ||\n                !task.start ||\n                task.start <= Date.now()) && // show items depending on whether their start date has passed\n            !task.postponed &&\n            (!task.contexts || task.contexts.length === 0)\n        );\n    }); // The inbox contains (by definition) tasks not yet assigned to any context\n}\n\nexport function somedayMaybeFilter(tasks: Task[]): Task[] {\n    return tasks.filter(task => !!task.postponed); // Someday/Maybe is a specific flag on the task\n}\n","import React from 'react';\nimport { Task } from 'brain-common';\nimport { IGlobalState } from '../model/GlobalState';\nimport { sortAndUniqueString } from './order';\nimport { LocalStorage } from '../storage/LocalStorage';\nimport { inboxFilter, somedayMaybeFilter } from './Filter';\nimport { IGlobalConfig } from '../model/GlobalConfig';\n\nexport interface ITaskAction {\n    type: 'task';\n    subtype: 'create' | 'update' | 'delete' | 'load';\n    task: Task;\n}\n\nexport interface ITaskBulkAction {\n    type: 'bulk';\n    subtype: 'load';\n    tasks: Task[];\n}\n\nexport function taskAction(\n    task: Task,\n    action: 'create' | 'update' | 'delete' | 'load'\n): ITaskAction {\n    return {\n        type: 'task',\n        subtype: action,\n        task: task\n    };\n}\n\nexport interface IFilterAction {\n    type: 'context' | 'project' | 'tag';\n    subtype: 'select' | 'deselect';\n    name: string;\n}\n\nexport interface IDueFilterAction {\n    type: 'due';\n    subtype: 'select' | 'deselect';\n    value?: number;\n}\n\nexport interface IConfigAction {\n    type: 'loadConfig';\n    config: IGlobalConfig;\n}\n\nexport interface IConfigChangeAction {\n    type: 'config';\n    setting: keyof IGlobalConfig;\n    value: any;\n}\n\nfunction handleFilterAction(\n    newState: IGlobalState,\n    action: IFilterAction\n): IGlobalState {\n    let items: string[] = [];\n    switch (action.type) {\n        case 'context':\n            items = [...newState.selectedContexts];\n            break;\n        case 'project':\n            items = [...newState.selectedProjects];\n            break;\n        case 'tag':\n            items = [...newState.selectedTags];\n            break;\n    }\n    switch (action.subtype) {\n        case 'select':\n            items.push(action.name);\n            items = sortAndUniqueString(items);\n            break;\n        case 'deselect':\n            var idx = items.findIndex(ctx => ctx === action.name);\n            if (idx !== -1) {\n                items.splice(idx, 1);\n            }\n            break;\n    }\n    switch (action.type) {\n        case 'context':\n            newState.selectedContexts = items;\n            break;\n        case 'project':\n            newState.selectedProjects = items;\n            break;\n        case 'tag':\n            newState.selectedTags = items;\n            break;\n    }\n    return newState;\n}\n\nfunction handleTaskAction(\n    storage: LocalStorage,\n    newState: IGlobalState,\n    action: ITaskAction\n) {\n    switch (action.subtype) {\n        case 'create':\n            action.task.created = Date.now();\n            newState.tasks.push(action.task);\n            storage.create(action.task);\n            break;\n        case 'update':\n            const updateIdx = newState.tasks.findIndex(task =>\n                task.id.equals(action.task.id)\n            );\n            if (updateIdx !== -1) {\n                newState.tasks.splice(\n                    updateIdx,\n                    1,\n                    (action as ITaskAction).task\n                );\n            }\n            storage.update(action.task);\n            break;\n        case 'delete':\n            const deleteIdx = newState.tasks.findIndex(task =>\n                task.id.equals(action.task.id)\n            );\n            if (deleteIdx !== -1) {\n                newState.tasks.splice(deleteIdx, 1);\n            }\n            break;\n        case 'load':\n            newState.tasks.push(action.task);\n            break;\n    }\n    return newState;\n}\n\nfunction handleTaskBulkAction(newState: IGlobalState, action: ITaskBulkAction) {\n    switch (action.subtype) {\n        case 'load':\n            newState.tasks = newState.tasks.concat(action.tasks);\n            break;\n    }\n    return newState;\n}\n\nfunction handleDueFilterAction(\n    newState: IGlobalState,\n    action: IDueFilterAction\n) {\n    if (action.subtype === 'deselect') {\n        newState.dueIn = undefined;\n    } else {\n        newState.dueIn = action.value;\n    }\n    return newState;\n}\n\n/**\n * The global reducer function handling application state transitions\n * @param state The current state of the applicatoin\n * @param action The action to update the global state\n */\nexport function reduce(\n    storage: LocalStorage,\n    state: IGlobalState,\n    action:\n        | ITaskAction\n        | ITaskBulkAction\n        | IFilterAction\n        | IDueFilterAction\n        | IConfigChangeAction\n        | IConfigAction\n): IGlobalState {\n    let newState = { ...state };\n    newState.tasks = [...state.tasks];\n    switch (action.type) {\n        case 'context':\n        case 'project':\n        case 'tag':\n            newState = handleFilterAction(newState, action as IFilterAction);\n            break;\n        case 'task':\n            newState = handleTaskAction(\n                storage,\n                newState,\n                action as ITaskAction\n            );\n            break;\n        case 'bulk':\n            newState = handleTaskBulkAction(\n                newState,\n                action as ITaskBulkAction\n            );\n            break;\n        case 'due':\n            newState = handleDueFilterAction(\n                newState,\n                action as IDueFilterAction\n            );\n            break;\n        case 'config':\n            newState = handleConfigAction(\n                storage,\n                newState,\n                action as IConfigChangeAction\n            );\n            break;\n        case 'loadConfig':\n            newState.config = action.config;\n    }\n    newState.contexts = extractContexts(newState.tasks);\n    newState.projects = extractProjects(newState.tasks);\n    newState.tags = extractTags(newState.tasks);\n    newState.inboxEmpty =\n        inboxFilter(newState.config, newState.tasks).length === 0;\n    newState.somedayMaybeEmpty =\n        somedayMaybeFilter(newState.tasks).length === 0;\n    return newState;\n}\n\nfunction extractContexts(tasks: Task[]): string[] {\n    return sortAndUniqueString(\n        tasks.filter(task => !task.done).flatMap(task => task.contexts || [])\n    );\n}\n\nfunction extractProjects(tasks: Task[]): string[] {\n    return sortAndUniqueString(\n        tasks.filter(task => !task.done).flatMap(task => task.projects || [])\n    );\n}\n\nfunction extractTags(tasks: Task[]): string[] {\n    return sortAndUniqueString(\n        tasks.filter(task => !task.done).flatMap(task => task.tags || [])\n    );\n}\n\nexport function handleConfigAction(\n    storage: LocalStorage,\n    newState: IGlobalState,\n    action: IConfigChangeAction\n): IGlobalState {\n    newState.config = {\n        ...newState.config,\n        [action.setting]: action.value\n    };\n    storage.putConfig(newState.config);\n    return newState;\n}\n\nexport const Dispatcher = React.createContext<\n    React.Dispatch<\n        | ITaskAction\n        | ITaskBulkAction\n        | IFilterAction\n        | IDueFilterAction\n        | IConfigChangeAction\n    >\n>(ev => {});\n","import { Task } from 'brain-common';\nimport React from 'react';\nimport { IGlobalConfig } from './GlobalConfig';\n\nexport interface IGlobalState {\n    tasks: Task[];\n    contexts: string[];\n    projects: string[];\n    tags: string[];\n    dueIn?: number; // filter for the maximum number of days in which an item may be due to be shown\n    selectedContexts: string[];\n    selectedProjects: string[];\n    selectedTags: string[];\n    inboxEmpty: boolean;\n    somedayMaybeEmpty: boolean;\n    config: IGlobalConfig;\n}\n\nexport const GlobalState = React.createContext({} as IGlobalState);\n","export function toDateDisplay(input: number): string {\n    const date = new Date(input);\n    return date && date.toISOString().slice(0, 10);\n}\n","import { Task } from 'brain-common';\nimport { Fragment, useState, useContext } from 'react';\nimport React from 'react';\nimport {\n    Input,\n    InputLabel,\n    FormControl,\n    Button,\n    ButtonGroup,\n    makeStyles,\n    createStyles,\n    withStyles,\n    FormHelperText,\n    Paper,\n    Select,\n    MenuItem,\n    Dialog,\n    DialogTitle,\n    Typography\n} from '@material-ui/core';\nimport { green, orange, yellow } from '@material-ui/core/colors';\nimport SaveIcon from '@material-ui/icons/Save';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\nimport PlayIcon from '@material-ui/icons/PlayArrow';\nimport SkipNextIcon from '@material-ui/icons/SkipNext';\nimport { ResponsiveButton } from './ResponsiveButton';\nimport { useHistory } from 'react-router-dom';\nimport ReactSelectMaterialUi from 'react-select-material-ui';\nimport { copyAndUpdate } from '../util/copyUpdater';\nimport { sortAndUniqueString } from '../util/order';\nimport { ValidationResult } from '../util/ValidationResult';\nimport { ITaskAction, Dispatcher } from '../util/dispatcher';\nimport { GlobalState } from '../model/GlobalState';\nimport { toDateDisplay } from '../util/displayHelper';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        buttons: {\n            marginLeft: 'auto',\n            marginRight: 'auto',\n            marginTop: theme.spacing(2)\n        },\n        error: {\n            backgroundColor: theme.palette.error.main,\n            color: theme.palette.error.contrastText,\n            margin: 'auto',\n            padding: theme.spacing(1)\n        }\n    })\n);\n\nconst SkipButton = withStyles({\n    root: {\n        backgroundColor: orange[500]\n    }\n})(ResponsiveButton);\n\nconst PostponeButton = withStyles({\n    root: {\n        backgroundColor: yellow[500]\n    }\n})(ResponsiveButton);\n\nfunction ActivationDialog(props: {\n    open: boolean;\n    onClose: (answer: boolean) => void;\n}) {\n    return (\n        <Dialog open={props.open} aria-labelledby='dialog-title'>\n            <DialogTitle id='dialog-title'>Activate task?</DialogTitle>\n            <Typography>\n                This task is currently postponed and will only be visible in\n                Someday/Maybe. Activate it?\n            </Typography>\n            <Button onClick={() => props.onClose(true)}>Activate</Button>\n            <Button onClick={() => props.onClose(false)}>\n                Leave postponed\n            </Button>\n        </Dialog>\n    );\n}\n\nexport interface TaskEditorProps {\n    task: Task;\n    isNew?: boolean;\n    onClose?: (abort: boolean) => void;\n    canSkip?: boolean; // does the editor have skip button (i.e. it's running in the context of the inbox processing assistent)\n}\n\nexport interface TaskEditorControlProps {\n    task: Task;\n    isNew?: boolean;\n    onSave?: (newState: Task) => void;\n    onPostpone?: (newState: Task) => void;\n    onCancel?: () => void;\n    onSkip?: () => void;\n    canSkip?: boolean; // does the editor have skip button (i.e. it's running in the context of the inbox processing assistent)\n}\n\nfunction validate(task: Task): ValidationResult {\n    const result = new ValidationResult();\n    if (!task.title || task.title === '') {\n        result.addError('title', 'Task title is required');\n    }\n    return result;\n}\n\nfunction StateButton(props: { task: Task; onClick: () => void }) {\n    const StyledButton = withStyles(theme => ({\n        root: {\n            backgroundColor: props.task.done\n                ? theme.palette.grey[500]\n                : green[500],\n            '& .stateText': {\n                textDecoration: props.task.done ? 'line-through' : 'none'\n            },\n            margin: theme.spacing(1)\n        }\n    }))(Button);\n    return (\n        <StyledButton\n            variant='contained'\n            color='primary'\n            onClick={props.onClick}>\n            <span className='stateText'>\n                Task is {props.task.done ? 'done. ' : 'open. '}\n            </span>\n            <span>{props.task.done ? 'Reopen?' : 'Finish?'}</span>\n        </StyledButton>\n    );\n}\n\nexport function TaskEditorControl(props: TaskEditorControlProps) {\n    const classes = useStyles();\n    const [editedTask, setEditedTask] = useState({ ...props.task });\n    const [validation, setValidation] = useState<ValidationResult>(\n        new ValidationResult()\n    );\n    const [activationRequest, setActivationRequest] = useState(false);\n    const handleChange = (name: keyof Task) => {\n        return (ev: React.ChangeEvent<HTMLInputElement>) => {\n            setEditedTask(copyAndUpdate(editedTask, name, ev.target.value));\n        };\n    };\n\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <Fragment>\n                    <h1>{props.isNew ? 'Create' : 'Edit'} task</h1>\n                    {validation.hasAnyError() && (\n                        <Paper className={classes.error}>\n                            Could not save task.\n                        </Paper>\n                    )}\n                    <FormControl>\n                        <FormControl\n                            required\n                            error={validation.hasError('title')}>\n                            <InputLabel htmlFor='title'>Title</InputLabel>\n                            <Input\n                                id='title'\n                                placeholder='Task title'\n                                value={editedTask.title || ''}\n                                onChange={handleChange('title')}\n                            />\n                            {validation.hasError('title') && (\n                                <FormHelperText>\n                                    {validation.error('title')}\n                                </FormHelperText>\n                            )}\n                        </FormControl>\n                        <StateButton\n                            task={editedTask}\n                            onClick={() =>\n                                setEditedTask({\n                                    ...editedTask,\n                                    done: !editedTask.done\n                                })\n                            }\n                        />\n                        <FormControl>\n                            <InputLabel htmlFor='Description'>\n                                Description\n                            </InputLabel>\n                            <Input\n                                id='description'\n                                multiline\n                                value={editedTask.description || ''}\n                                placeholder='Description'\n                                onChange={handleChange('description')}\n                            />\n                        </FormControl>\n                        <ReactSelectMaterialUi\n                            label='Contexts'\n                            options={sortAndUniqueString(\n                                state.contexts.concat(editedTask.contexts || [])\n                            )}\n                            SelectProps={{ isCreatable: true, isMulti: true }}\n                            fullWidth={true}\n                            onChange={(newValue: any) => {\n                                const nv = copyAndUpdate(\n                                    editedTask,\n                                    'contexts',\n                                    newValue\n                                );\n                                setEditedTask(nv);\n                            }}\n                            values={editedTask.contexts}\n                        />\n                        <ReactSelectMaterialUi\n                            label='Projects'\n                            options={sortAndUniqueString(\n                                state.projects.concat(editedTask.projects || [])\n                            )}\n                            SelectProps={{ isCreatable: true, isMulti: true }}\n                            fullWidth={true}\n                            onChange={(newValue: any) => {\n                                const nv = copyAndUpdate(\n                                    editedTask,\n                                    'projects',\n                                    newValue\n                                );\n                                setEditedTask(nv);\n                            }}\n                            values={editedTask.projects}\n                        />\n                        <ReactSelectMaterialUi\n                            label='Tags'\n                            options={sortAndUniqueString(\n                                state.tags.concat(editedTask.tags || [])\n                            )}\n                            SelectProps={{ isCreatable: true, isMulti: true }}\n                            fullWidth={true}\n                            onChange={(newValue: any) => {\n                                const nv = copyAndUpdate(\n                                    editedTask,\n                                    'tags',\n                                    newValue\n                                );\n                                setEditedTask(nv);\n                            }}\n                            values={editedTask.tags}\n                        />\n                        <FormControl>\n                            Start:\n                            <input\n                                id='start'\n                                type='date'\n                                value={\n                                    (editedTask.start &&\n                                        toDateDisplay(editedTask.start)) ||\n                                    ''\n                                }\n                                onChange={ev => {\n                                    const nv = copyAndUpdate(\n                                        editedTask,\n                                        'start',\n                                        ev.target.valueAsDate &&\n                                            ev.target.valueAsDate.getTime()\n                                    );\n                                    setEditedTask(nv);\n                                }}\n                            />\n                        </FormControl>\n                        <FormControl>\n                            Due:\n                            <input\n                                id='due'\n                                type='date'\n                                value={\n                                    (editedTask.due &&\n                                        toDateDisplay(editedTask.due)) ||\n                                    ''\n                                }\n                                onChange={ev => {\n                                    const nv = copyAndUpdate(\n                                        editedTask,\n                                        'due',\n                                        ev.target.valueAsDate &&\n                                            ev.target.valueAsDate.getTime()\n                                    );\n                                    setEditedTask(nv);\n                                }}\n                            />\n                        </FormControl>\n                        <FormControl>\n                            <InputLabel htmlFor='priority'>Priority</InputLabel>\n                            <Select\n                                id='priority'\n                                value={editedTask.priority || ' '}\n                                onChange={ev =>\n                                    setEditedTask(\n                                        copyAndUpdate(\n                                            editedTask,\n                                            'priority',\n                                            ev.target.value === ' '\n                                                ? undefined\n                                                : ev.target.value\n                                        )\n                                    )\n                                }>\n                                <MenuItem value={' '}>[None]</MenuItem>\n                                <MenuItem value={'A'}>A</MenuItem>\n                                <MenuItem value={'B'}>B</MenuItem>\n                                <MenuItem value={'C'}>C</MenuItem>\n                                <MenuItem value={'D'}>D</MenuItem>\n                                <MenuItem value={'E'}>E</MenuItem>\n                                <MenuItem value={'F'}>F</MenuItem>\n                            </Select>\n                        </FormControl>\n                        <ButtonGroup className={classes.buttons}>\n                            <ResponsiveButton\n                                icon={<SaveIcon />}\n                                extended='Save'\n                                color='primary'\n                                variant='contained'\n                                aria-label='Save'\n                                onClick={() => {\n                                    const res = validate(editedTask);\n                                    if (res.hasAnyError()) {\n                                        setValidation(res);\n                                    } else {\n                                        props.onSave &&\n                                            props.onSave(editedTask);\n                                    }\n                                }}\n                            />\n                            <PostponeButton\n                                icon={\n                                    !!editedTask.postponed ? (\n                                        <PlayIcon />\n                                    ) : (\n                                        <AllInclusiveIcon />\n                                    )\n                                }\n                                extended={\n                                    !!editedTask.postponed\n                                        ? 'Activate'\n                                        : 'Postpone'\n                                }\n                                color='primary'\n                                variant='contained'\n                                aria-label={\n                                    !!editedTask.postponed\n                                        ? 'Activate'\n                                        : 'Postpone'\n                                }\n                                onClick={() => {\n                                    const res = validate(editedTask);\n                                    if (res.hasAnyError()) {\n                                        setValidation(res);\n                                    } else {\n                                        props.onPostpone &&\n                                            props.onPostpone(editedTask);\n                                    }\n                                }}\n                            />\n                            <SkipButton\n                                icon={<SkipNextIcon />}\n                                extended='Skip task'\n                                color='primary'\n                                variant='contained'\n                                aria-label='Skip task'\n                                onClick={() => {\n                                    props.onSkip && props.onSkip();\n                                }}\n                                style={{\n                                    display: props.canSkip\n                                        ? 'inline-block'\n                                        : 'none'\n                                }}\n                            />\n                            <ResponsiveButton\n                                icon={<CancelIcon />}\n                                extended='Cancel'\n                                color='secondary'\n                                variant='contained'\n                                aria-label='Cancel'\n                                onClick={() =>\n                                    props.onCancel && props.onCancel()\n                                }\n                            />\n                        </ButtonGroup>\n                    </FormControl>\n                    <ActivationDialog\n                        open={activationRequest}\n                        onClose={activate => {\n                            if (activate) {\n                                editedTask.postponed = false;\n                            }\n                            props.onSave && props.onSave(editedTask);\n                            setActivationRequest(false);\n                        }}\n                    />\n                </Fragment>\n            )}\n        </GlobalState.Consumer>\n    );\n}\n\nexport function TaskEditor(props: TaskEditorProps) {\n    const history = useHistory();\n    const dispatch = useContext(Dispatcher);\n\n    const handlePostpone = (newState: Task) => {\n        newState.postponed = !newState.postponed;\n        dispatch({\n            type: 'task',\n            subtype: props.isNew ? 'create' : 'update',\n            task: newState\n        } as ITaskAction);\n        history.goBack();\n    };\n\n    const handleSave = (newState: Task) => {\n        dispatch({\n            type: 'task',\n            subtype: props.isNew ? 'create' : 'update',\n            task: newState\n        } as ITaskAction);\n        history.goBack();\n    };\n\n    return (\n        <TaskEditorControl\n            task={props.task}\n            isNew={props.isNew}\n            onSave={handleSave}\n            onCancel={() => history.goBack()}\n            onPostpone={handlePostpone}\n        />\n    );\n}\n","import { Task, LegacyTask } from 'brain-common';\nimport { openDB, IDBPDatabase, DBSchema, IDBPTransaction } from 'idb';\nimport { Guid } from 'guid-typescript';\nimport hash from 'object-hash';\nimport { TaskDto } from 'brain-common';\nimport { IGlobalConfig } from '../model/GlobalConfig';\n\ninterface TaskDBSchema extends TaskDBSchemav2Schema {\n    config: { key: string; value: IGlobalConfig };\n}\n\ninterface TaskDBSchemav2Schema extends DBSchema {\n    tasks: { key: string; value: TaskDto };\n}\n\ninterface TaskDBv1Schema extends DBSchema {\n    tasks: { key: string; value: LegacyTask };\n}\n\nexport class LocalStorage {\n    public async loadTasks(): Promise<Task[]> {\n        const db = await this.openDb();\n        const tasks = await db\n            .transaction('tasks')\n            .objectStore('tasks')\n            .getAll();\n        console.log(`Loaded ${tasks.length} stored tasks`);\n        return tasks.map(task => ({\n            ...task,\n            id: Guid.parse(task.id)\n        }));\n    }\n\n    public async create(task: Task): Promise<void> {\n        const versionedTask = LocalStorage.updateVersion({\n            ...task,\n            id: task.id.toString()\n        });\n        const db = await this.openDb();\n        const tx = db.transaction('tasks', 'readwrite');\n        await tx.objectStore('tasks').put(versionedTask);\n        await tx.done;\n    }\n\n    public async update(task: Task): Promise<void> {\n        const versionedTask = LocalStorage.updateVersion({\n            ...task,\n            id: task.id.toString()\n        });\n        const db = await this.openDb();\n        console.log('Updating', versionedTask);\n        const tx = db.transaction('tasks', 'readwrite');\n        await tx.objectStore('tasks').put(versionedTask);\n        await tx.done;\n    }\n\n    public async config(): Promise<IGlobalConfig> {\n        const db = await this.openDb();\n        return (\n            (await db\n                .transaction('config')\n                .objectStore('config')\n                .get('global')) || {\n                id: 'global',\n                showDone: false,\n                showFutureStart: false\n            }\n        );\n    }\n\n    public async putConfig(config: IGlobalConfig): Promise<void> {\n        const db = await this.openDb();\n        const storedValue = {\n            ...config,\n            id: 'global'\n        };\n        await db\n            .transaction('config', 'readwrite')\n            .objectStore('config')\n            .put(storedValue);\n    }\n\n    private static updateVersion(task: TaskDto): TaskDto {\n        const newVersion = (task.version || 0) + 1;\n        return { ...task, version: newVersion, hash: hash(task) };\n    }\n\n    private async openDb() {\n        const db = await openDB<TaskDBSchema>('tasks', 3, {\n            async upgrade(db, oldVersion, newVersion, transaction) {\n                console.log(`Upgrading database to version ${newVersion}`);\n                if (oldVersion < 1) {\n                    LocalStorage.upgradeV1(db);\n                }\n                if (oldVersion < 2) {\n                    LocalStorage.upgradeV2(transaction);\n                }\n                if (oldVersion < 3) {\n                    LocalStorage.upgradeV3(db);\n                }\n                console.log('Finished.');\n            }\n        });\n        return db;\n    }\n\n    // database upgrade methods\n    private static async upgradeV1(db: IDBPDatabase<TaskDBSchema>) {\n        console.log('Creating the object store.');\n        db.createObjectStore('tasks', { keyPath: 'id' });\n    }\n\n    private static async upgradeV2(\n        transaction: IDBPTransaction<TaskDBSchema, ('tasks' | 'config')[]>\n    ) {\n        console.log('Transforming all existing objects to v2 schema');\n        const oldDb = await openDB<TaskDBv1Schema>('tasks', 3); // This does feel slightly wrong, but should be OK at this point, as no update has taken place yet\n        const objects = await oldDb\n            .transaction('tasks', 'readonly')\n            .objectStore('tasks')\n            .getAll();\n        oldDb.close();\n        for (let object of objects) {\n            const newObject: TaskDto = {\n                ...object,\n                due: object.due && object.due.getTime(),\n                created:\n                    (object.created && object.created.getTime()) || Date.now(),\n                version: 0,\n                hash: ''\n            };\n            await transaction\n                .objectStore('tasks')\n                .put(LocalStorage.updateVersion(newObject));\n        }\n    }\n\n    private static async upgradeV3(db: IDBPDatabase<TaskDBSchema>) {\n        db.createObjectStore('config', { keyPath: 'id' });\n    }\n}\n","import React, { Fragment, useState } from 'react';\nimport { ResponsiveButton } from './ResponsiveButton';\nimport { Menu, MenuItem, ListItemIcon, ListItemText } from '@material-ui/core';\n\nexport interface FilterEntry<T> {\n    text: string;\n    selected: boolean;\n    value?: T;\n}\n\nexport interface FilterButtonProps<T> {\n    entries: FilterEntry<T>[];\n    icon: JSX.Element;\n    text: string;\n    onChange?: (selectedEntry: FilterEntry<T>) => void;\n}\n\nexport function FilterButton<T>(props: FilterButtonProps<T>) {\n    const [anchorEl, setAnchorEl] = useState<null | HTMLElement>(null);\n    return (\n        <Fragment>\n            <ResponsiveButton\n                aria-controls='simple-menu'\n                aria-haspopup='true'\n                color='inherit'\n                icon={props.icon}\n                extended={props.text}\n                onClick={(ev: React.MouseEvent<HTMLButtonElement>) =>\n                    setAnchorEl(ev.currentTarget)\n                }\n                disabled={props.entries.length === 0}\n            />\n            <Menu\n                id='contexts-menu'\n                keepMounted\n                anchorEl={anchorEl}\n                open={Boolean(anchorEl)}\n                onClose={ev => setAnchorEl(null)}>\n                {props.entries.map((entry, index) => (\n                    <MenuItem\n                        key={entry.text}\n                        onClick={() => {\n                            props.onChange && props.onChange(entry);\n                            setAnchorEl(null);\n                        }}\n                        selected={entry.selected}>\n                        <ListItemIcon>{props.icon}</ListItemIcon>\n                        <ListItemText>{entry.text}</ListItemText>\n                    </MenuItem>\n                ))}\n            </Menu>\n        </Fragment>\n    );\n}\n","import React, { useContext } from 'react';\nimport LandscapeIcon from '@material-ui/icons/Landscape';\nimport { FilterButton } from './FilterButton';\nimport { IFilterAction, Dispatcher } from '../util/dispatcher';\nimport { GlobalState } from '../model/GlobalState';\nimport { Badge } from '@material-ui/core';\n\n/**\n * The contexts menu button\n *\n * @param props The properties of the contexts button\n */\nexport function ContextsButton() {\n    const dispatch = useContext(Dispatcher);\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <FilterButton\n                    icon={\n                        <Badge\n                            invisible={state.selectedContexts.length === 0}\n                            color='secondary'\n                            variant='dot'>\n                            <LandscapeIcon />\n                        </Badge>\n                    }\n                    text='Contexts'\n                    entries={state.contexts.map(ctx => ({\n                        text: ctx,\n                        selected: !!state.selectedContexts.find(c => c === ctx)\n                    }))}\n                    onChange={selectedEntry => {\n                        dispatch({\n                            type: 'context',\n                            subtype: selectedEntry.selected\n                                ? 'deselect'\n                                : 'select',\n                            name: selectedEntry.text\n                        } as IFilterAction);\n                    }}\n                />\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import React, { useContext } from 'react';\nimport TableChartIcon from '@material-ui/icons/TableChart';\nimport { FilterButton } from './FilterButton';\nimport { GlobalState } from '../model/GlobalState';\nimport { IFilterAction, Dispatcher } from '../util/dispatcher';\nimport { Badge } from '@material-ui/core';\n\nexport function ProjectsButton() {\n    const dispatch = useContext(Dispatcher);\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <FilterButton\n                    icon={\n                        <Badge\n                            invisible={state.selectedProjects.length === 0}\n                            color='secondary'\n                            variant='dot'>\n                            <TableChartIcon />\n                        </Badge>\n                    }\n                    text='Projects'\n                    entries={state.projects.map(project => ({\n                        text: project,\n                        selected: !!state.selectedProjects.find(\n                            p => p === project\n                        )\n                    }))}\n                    onChange={selectedEntry => {\n                        dispatch({\n                            type: 'project',\n                            subtype: selectedEntry.selected\n                                ? 'deselect'\n                                : 'select',\n                            name: selectedEntry.text\n                        } as IFilterAction);\n                    }}\n                />\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import React, { useContext } from 'react';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport { FilterButton } from './FilterButton';\nimport { GlobalState } from '../model/GlobalState';\nimport { IFilterAction, Dispatcher } from '../util/dispatcher';\nimport { Badge } from '@material-ui/core';\n\n/**\n * The tags menu button\n *\n * @param props The properties of the tags button\n */\nexport function TagsButton() {\n    const dispatch = useContext(Dispatcher);\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <FilterButton\n                    icon={\n                        <Badge\n                            invisible={state.selectedTags.length === 0}\n                            color='secondary'\n                            variant='dot'>\n                            <LocalOfferIcon />\n                        </Badge>\n                    }\n                    text='Tags'\n                    entries={state.tags.map(tag => ({\n                        text: tag,\n                        selected: !!state.selectedTags.find(t => t === tag)\n                    }))}\n                    onChange={selectedEntry => {\n                        dispatch({\n                            type: 'tag',\n                            subtype: selectedEntry.selected\n                                ? 'deselect'\n                                : 'select',\n                            name: selectedEntry.text\n                        } as IFilterAction);\n                    }}\n                />\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import { Task, TaskPrio } from 'brain-common';\nimport React, { Fragment } from 'react';\nimport {\n    ListItem,\n    ListItemText,\n    makeStyles,\n    createStyles,\n    Typography\n} from '@material-ui/core';\nimport { useHistory } from 'react-router-dom';\nimport LandscapeIcon from '@material-ui/icons/Landscape';\nimport TableChartIcon from '@material-ui/icons/TableChart';\nimport LocalOfferIcon from '@material-ui/icons/LocalOffer';\nimport EventIcon from '@material-ui/icons/Event';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport PlayCircleIcon from '@material-ui/icons/PlayCircleOutline';\nimport {\n    red,\n    orange,\n    yellow,\n    green,\n    lightBlue,\n    grey\n} from '@material-ui/core/colors';\nimport { formatDistance } from 'date-fns';\nimport { toDateDisplay } from '../util/displayHelper';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        done: {\n            textDecoration: 'line-through',\n            color: theme.palette.grey[500]\n        },\n        metaEntry: {\n            marginLeft: '0.5em',\n            whiteSpace: 'nowrap'\n        },\n        metaText: {\n            whiteSpace: 'normal'\n        },\n        dueToday: {\n            color: theme.palette.primary.main\n        },\n        overdue: {\n            color: theme.palette.error.main\n        },\n        priority: {\n            borderRadius: '50%',\n            width: '1em',\n            height: '1em',\n            display: 'inline-block',\n            textAlign: 'center',\n            paddingBottom: theme.spacing(0.5),\n            paddingLeft: theme.spacing(0.25),\n            paddingRight: theme.spacing(0.25)\n        },\n        prioA: {\n            backgroundColor: red[500],\n            color: theme.palette.getContrastText(red[500])\n        },\n        prioB: {\n            backgroundColor: orange[500],\n            color: theme.palette.getContrastText(orange[500])\n        },\n        prioC: {\n            backgroundColor: yellow[500],\n            color: theme.palette.getContrastText(yellow[500])\n        },\n        prioD: {\n            backgroundColor: green[500],\n            color: theme.palette.getContrastText(green[500])\n        },\n        prioE: {\n            backgroundColor: lightBlue[200],\n            color: theme.palette.getContrastText(lightBlue[200])\n        },\n        prioF: {\n            backgroundColor: grey[500],\n            color: theme.palette.getContrastText(grey[500])\n        }\n    })\n);\n\n/**\n * Properties accepted by the TaskListItem component\n */\nexport interface TaskListItemProps {\n    task: Task;\n}\n\nfunction DueClass(task: Task): string {\n    const classes = useStyles();\n    const today = new Date(Date.now()).toISOString().slice(0, 10);\n    const due = task.due && toDateDisplay(task.due);\n    if (!due || due > today) {\n        return '';\n    }\n    if (due === today) {\n        return classes.dueToday;\n    }\n    return classes.overdue;\n}\n\nfunction PrioDisplay(props: { prio: TaskPrio }) {\n    const classes = useStyles();\n    let prioClass = undefined;\n    switch (props.prio) {\n        case 'A':\n            prioClass = classes.prioA;\n            break;\n        case 'B':\n            prioClass = classes.prioB;\n            break;\n        case 'C':\n            prioClass = classes.prioC;\n            break;\n        case 'D':\n            prioClass = classes.prioD;\n            break;\n        case 'E':\n            prioClass = classes.prioE;\n            break;\n        case 'F':\n            prioClass = classes.prioF;\n            break;\n    }\n    return (\n        <span className={`${classes.priority} ${prioClass}`}>{props.prio}</span>\n    );\n}\n\nfunction AgeDisplay(props: { created: Date; task: Task }) {\n    const classes = useStyles();\n    const age = formatDistance(props.created, new Date());\n    return (\n        props.created && (\n            <span className={classes.metaEntry}>\n                <SaveAltIcon fontSize='inherit' />\n                <Typography variant='srOnly'>Age</Typography>\n                <span className={classes.metaText}>{age} ago</span>\n            </span>\n        )\n    );\n}\n\nfunction MetaDisplay(props: { task: Task }) {\n    const classes = useStyles();\n    return (\n        <Fragment>\n            {props.task.priority && <PrioDisplay prio={props.task.priority} />}\n            {props.task.contexts && props.task.contexts.length !== 0 && (\n                <span className={classes.metaEntry}>\n                    <LandscapeIcon fontSize='inherit' />\n                    <Typography variant='srOnly'>Contexts</Typography>\n                    <span className={classes.metaText}>\n                        {props.task.contexts.join(', ')}\n                    </span>\n                </span>\n            )}{' '}\n            {props.task.projects && props.task.projects.length !== 0 && (\n                <span className={classes.metaEntry}>\n                    <TableChartIcon fontSize='inherit' />\n                    <Typography variant='srOnly'>Projects</Typography>\n                    {props.task.projects.join(', ')}\n                </span>\n            )}{' '}\n            {props.task.tags && props.task.tags.length !== 0 && (\n                <span className={classes.metaEntry}>\n                    <LocalOfferIcon fontSize='inherit' />\n                    <Typography variant='srOnly'>Tags</Typography>\n                    <span className={classes.metaText}>\n                        {props.task.tags.join(', ')}\n                    </span>\n                </span>\n            )}{' '}\n            {props.task.start && (\n                <span className={classes.metaEntry}>\n                    <PlayCircleIcon fontSize='inherit' />\n                    <Typography variant='srOnly'>Start date</Typography>\n                    <span className={classes.metaText}>\n                        {new Date(props.task.start).toLocaleDateString()}\n                    </span>\n                </span>\n            )}{' '}\n            {props.task.due && (\n                <span\n                    className={`${classes.metaEntry} ${DueClass(props.task)}`}>\n                    <EventIcon fontSize='inherit' />\n                    <Typography variant='srOnly'>Due date</Typography>\n                    <span className={classes.metaText}>\n                        {new Date(props.task.due).toLocaleDateString()}\n                    </span>\n                </span>\n            )}{' '}\n            {props.task.created && (\n                <AgeDisplay\n                    created={new Date(props.task.created)}\n                    task={props.task}\n                />\n            )}\n        </Fragment>\n    );\n}\n\n/**\n * An item in the task list representing a single item\n *\n * @param props The properties of this component\n */\nexport function TaskListItem(props: TaskListItemProps) {\n    const classes = useStyles();\n    const history = useHistory();\n    return (\n        <ListItem button onClick={() => history.push(`/task/${props.task.id}`)}>\n            <ListItemText\n                primary={props.task.title}\n                secondary={<MetaDisplay task={props.task} />}\n                className={(props.task.done && classes.done) || undefined}\n            />\n        </ListItem>\n    );\n}\n","import React from 'react';\nimport { List } from '@material-ui/core';\nimport { TaskListItem } from './TaskListItem';\nimport { defaultTaskOrder } from '../util/order';\nimport { Task } from 'brain-common';\n\nexport interface TaskListProps {\n    tasks: Task[];\n}\n\nexport function TaskList(props: TaskListProps) {\n    return (\n        <List>\n            {props.tasks.sort(defaultTaskOrder).map(task => (\n                <TaskListItem key={task.id.toString()} task={task} />\n            ))}\n        </List>\n    );\n}\n","import React, { useContext } from 'react';\nimport WatchLaterIcon from '@material-ui/icons/WatchLater';\n\nimport { FilterButton } from './FilterButton';\nimport { GlobalState } from '../model/GlobalState';\nimport { Badge } from '@material-ui/core';\nimport { Dispatcher } from '../util/dispatcher';\n\nexport function DueFilters() {\n    const dispatch = useContext(Dispatcher);\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <FilterButton\n                    icon={\n                        <Badge\n                            invisible={state.dueIn === undefined}\n                            color='secondary'\n                            variant='dot'>\n                            <WatchLaterIcon />\n                        </Badge>\n                    }\n                    text='Due'\n                    entries={[\n                        {\n                            text: 'Overdue',\n                            selected: !!(\n                                state.dueIn !== undefined && state.dueIn === 0\n                            ),\n                            value: 0\n                        },\n                        {\n                            text: 'Today',\n                            selected: !!(\n                                state.dueIn !== undefined && state.dueIn === 1\n                            ),\n                            value: 1\n                        },\n                        {\n                            text: 'Next week',\n                            selected: !!(\n                                state.dueIn !== undefined && state.dueIn === 7\n                            ),\n                            value: 7\n                        },\n                        {\n                            text: 'Next month',\n                            selected: !!(\n                                state.dueIn !== undefined && state.dueIn === 31\n                            ),\n                            value: 31\n                        }\n                    ]}\n                    onChange={selectedEntry => {\n                        dispatch({\n                            type: 'due',\n                            subtype: selectedEntry.selected\n                                ? 'deselect'\n                                : 'select',\n                            value: selectedEntry.value\n                        });\n                    }}\n                />\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import { Fragment } from 'react';\nimport React from 'react';\nimport {\n    AppBar,\n    Toolbar,\n    makeStyles,\n    createStyles,\n    Theme,\n    Button\n} from '@material-ui/core';\nimport { ContextsButton } from './ContextsButton';\nimport { ProjectsButton } from './ProjectsButton';\nimport { TagsButton } from './TagsButton';\nimport { fade } from '@material-ui/core/styles';\nimport { overviewFilter } from '../util/Filter';\nimport { GlobalState } from '../model/GlobalState';\nimport { TaskList } from './TaskList';\nimport { DueFilters } from './DueFilters';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        appBar: {\n            top: 'auto',\n            bottom: 0\n        },\n        search: {\n            position: 'relative',\n            borderRadius: theme.shape.borderRadius,\n            backgroundColor: fade(theme.palette.common.white, 0.15),\n            '&:hover': {\n                backgroundColor: fade(theme.palette.common.white, 0.25)\n            },\n            marginLeft: 0,\n            width: '100%',\n            [theme.breakpoints.up('sm')]: {\n                marginLeft: theme.spacing(1),\n                width: 'auto'\n            }\n        },\n        searchIcon: {\n            width: theme.spacing(7),\n            height: '100%',\n            position: 'absolute',\n            pointerEvents: 'none',\n            display: 'flex',\n            alignItems: 'center',\n            justifyContent: 'center'\n        },\n        inputRoot: {\n            color: 'inherit'\n        },\n        inputInput: {\n            padding: theme.spacing(1, 1, 1, 7),\n            transition: theme.transitions.create('width'),\n            width: '100%',\n            [theme.breakpoints.up('sm')]: {\n                width: 120,\n                '&:focus': {\n                    width: 200\n                }\n            }\n        },\n        task: {\n            margin: 2\n        },\n        settings: {\n            marginLeft: 'auto',\n            marginRight: 0\n        }\n    })\n);\n\nexport function TaskOverview() {\n    const classes = useStyles();\n    const history = useHistory();\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <Fragment>\n                    <AppBar className={classes.appBar}>\n                        <Toolbar>\n                            <ContextsButton />\n                            <ProjectsButton />\n                            <TagsButton />\n                            <DueFilters />\n                            <Button\n                                className={classes.settings}\n                                onClick={() => history.push('/config')}>\n                                <SettingsIcon className={classes.settings} />\n                            </Button>\n                        </Toolbar>\n                    </AppBar>\n                    <TaskList\n                        tasks={overviewFilter(\n                            state.config,\n                            state.tasks,\n                            state.selectedContexts,\n                            state.selectedProjects,\n                            state.selectedTags,\n                            state.dueIn\n                        )}\n                    />\n                </Fragment>\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import { Fragment } from 'react';\nimport React from 'react';\nimport { GlobalState } from '../model/GlobalState';\nimport { TaskList } from './TaskList';\nimport { inboxFilter } from '../util/Filter';\nimport {\n    AppBar,\n    Toolbar,\n    makeStyles,\n    createStyles,\n    Button\n} from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        appBar: {\n            top: 'auto',\n            bottom: 0\n        },\n        settings: {\n            marginLeft: 'auto',\n            marginRight: 0\n        }\n    })\n);\n\nexport function Inbox() {\n    const classes = useStyles();\n    const history = useHistory();\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <Fragment>\n                    <TaskList tasks={inboxFilter(state.config, state.tasks)} />\n                    <AppBar className={classes.appBar}>\n                        <Toolbar>\n                            <Button\n                                className={classes.settings}\n                                onClick={() => history.push('/config')}>\n                                <SettingsIcon className={classes.settings} />\n                            </Button>\n                        </Toolbar>\n                    </AppBar>\n                </Fragment>\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import { Fragment } from 'react';\nimport React from 'react';\nimport { GlobalState } from '../model/GlobalState';\nimport { TaskList } from './TaskList';\nimport { somedayMaybeFilter } from '../util/Filter';\nimport AppBar from '@material-ui/core/AppBar';\nimport { makeStyles, createStyles } from '@material-ui/styles';\nimport { Toolbar, Button } from '@material-ui/core';\nimport SettingsIcon from '@material-ui/icons/Settings';\nimport { useHistory } from 'react-router';\n\nconst useStyles = makeStyles(() =>\n    createStyles({\n        appBar: {\n            top: 'auto',\n            bottom: 0\n        },\n        settings: {\n            marginLeft: 'auto',\n            marginRight: 0\n        }\n    })\n);\n\nexport function SomedayMaybe() {\n    const classes = useStyles();\n    const history = useHistory();\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <Fragment>\n                    <TaskList tasks={somedayMaybeFilter(state.tasks)} />\n                    <AppBar className={classes.appBar}>\n                        <Toolbar>\n                            <Button\n                                className={classes.settings}\n                                onClick={() => history.push('/config')}>\n                                <SettingsIcon className={classes.settings} />\n                            </Button>\n                        </Toolbar>\n                    </AppBar>\n                </Fragment>\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import {\n    Tab,\n    Tabs,\n    Typography,\n    Fab,\n    Theme,\n    useMediaQuery\n} from '@material-ui/core';\nimport InboxIcon from '@material-ui/icons/Inbox';\nimport ListIcon from '@material-ui/icons/List';\nimport AddIcon from '@material-ui/icons/Add';\nimport AllInclusiveIcon from '@material-ui/icons/AllInclusive';\nimport React, { Fragment } from 'react';\nimport { makeStyles, createStyles } from '@material-ui/styles';\nimport { TaskOverview } from './TaskOverview';\nimport { Inbox } from './Inbox';\nimport { SomedayMaybe } from './SomedayMaybe';\nimport { useHistory, Route, Switch } from 'react-router';\nimport { GlobalState } from '../model/GlobalState';\n\ninterface TabPanelProps {\n    index: number;\n    children?: React.ReactNode;\n}\n\nfunction TabPanel(props: TabPanelProps) {\n    return (\n        <Typography\n            component='div'\n            role='tabpanel'\n            id={`full-width-tabpanel-${props.index}`}>\n            {props.children}\n        </Typography>\n    );\n}\n\nconst useStyles = makeStyles((theme: Theme) =>\n    createStyles({\n        addButton: {\n            position: 'fixed',\n            zIndex: 1,\n            bottom: 75,\n            left: 0,\n            right: 0,\n            marginLeft: 'auto',\n            marginRight: 10\n        },\n        tabs: {\n            position: 'fixed',\n            top: 0,\n            left: 0,\n            width: '100%',\n            zIndex: 1\n        },\n        tabPanel: {\n            position: 'absolute',\n            top: 0,\n            left: 0,\n            bottom: 0,\n            right: 0,\n            overflowY: 'auto'\n        },\n        smallBorder: {\n            marginTop: theme.spacing(6),\n            marginBottom: theme.spacing(6)\n        },\n        normalBorder: {\n            marginTop: theme.spacing(9),\n            marginBottom: theme.spacing(8)\n        }\n    })\n);\n\nfunction TabHeader(props: {\n    path: string;\n    inboxEmpty: boolean;\n    somedayMaybeEmpty: boolean;\n}) {\n    const history = useHistory();\n    const classes = useStyles();\n    const smallScreen = useMediaQuery((theme: Theme) =>\n        theme.breakpoints.down('xs')\n    );\n    return (\n        <Tabs\n            variant='fullWidth'\n            indicatorColor='primary'\n            value={props.path}\n            className={classes.tabs}>\n            <Tab\n                icon={<ListIcon />}\n                label={smallScreen ? undefined : 'Tasks'}\n                aria-label='Tasks'\n                value='/'\n                onClick={ev => history.push('/')}\n            />\n            <Tab\n                icon={<InboxIcon />}\n                label={smallScreen ? undefined : 'Inbox'}\n                aria-label='Inbox'\n                disabled={props.inboxEmpty}\n                value='/inbox'\n                onClick={ev => history.push('/inbox')}\n            />\n            <Tab\n                icon={<AllInclusiveIcon />}\n                label={smallScreen ? undefined : 'Someday/Maybe'}\n                aria-label='Inbox'\n                disabled={props.somedayMaybeEmpty}\n                value='/someday'\n                onClick={ev => history.push('/someday')}\n            />\n        </Tabs>\n    );\n}\n\nfunction TabContent() {\n    const classes = useStyles();\n    const smallScreen = useMediaQuery((theme: Theme) =>\n        theme.breakpoints.down('xs')\n    );\n    return (\n        <div\n            className={`${classes.tabPanel} ${\n                smallScreen ? classes.smallBorder : classes.normalBorder\n            }`}>\n            <Switch>\n                <Route exact path='/'>\n                    <TabPanel index={0}>\n                        <TaskOverview />\n                    </TabPanel>\n                </Route>\n                <Route path='/inbox'>\n                    <TabPanel index={1}>\n                        <Inbox />\n                    </TabPanel>\n                </Route>\n                <Route path='/someday'>\n                    <TabPanel index={2}>\n                        <SomedayMaybe />\n                    </TabPanel>\n                </Route>\n            </Switch>\n        </div>\n    );\n}\n\nexport function MainView() {\n    const history = useHistory();\n    const classes = useStyles();\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <Route\n                    render={match => (\n                        <Fragment>\n                            <TabHeader\n                                path={match.location.pathname}\n                                inboxEmpty={state.inboxEmpty}\n                                somedayMaybeEmpty={state.somedayMaybeEmpty}\n                            />\n                            {/* <SwipeableViews\n            axis='x'\n            index={value}\n            onChangeIndex={newValue => {\n                setValue(newValue);\n            }}\n            style={{\n                top: 'auto',\n                bottom: 0\n            }}> */}\n                            <TabContent />\n                            <Fab\n                                color='secondary'\n                                aria-label='add'\n                                className={classes.addButton}\n                                onClick={() => history.push('/newTask')}>\n                                <AddIcon />\n                            </Fab>\n                            {/* </SwipeableViews> */}\n                        </Fragment>\n                    )}\n                />\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import React, { Fragment, useContext } from 'react';\nimport {\n    FormControl,\n    Checkbox,\n    FormControlLabel,\n    Button\n} from '@material-ui/core';\nimport ChevronLeftIcon from '@material-ui/icons/ChevronLeft';\nimport { makeStyles, createStyles } from '@material-ui/styles';\nimport { Dispatcher } from '../util/dispatcher';\nimport { useHistory } from 'react-router';\nimport { GlobalState } from '../model/GlobalState';\n\nconst useStyles = makeStyles(theme =>\n    createStyles({\n        backButton: {\n            marginLeft: 0,\n            marginRight: 'auto'\n        },\n        backButtonRoot: {\n            display: 'flex'\n        }\n    })\n);\n\nexport function ConfigEditor() {\n    const classes = useStyles();\n    const dispatch = useContext(Dispatcher);\n    const history = useHistory();\n    return (\n        <GlobalState.Consumer>\n            {state => (\n                <Fragment>\n                    <div className={classes.backButtonRoot}>\n                        <Button\n                            className={classes.backButton}\n                            onClick={() => history.goBack()}>\n                            <ChevronLeftIcon fontSize='large' />\n                        </Button>\n                    </div>\n                    <h1>Configuration</h1>\n                    <FormControl>\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    id='showDone'\n                                    checked={state.config.showDone}\n                                    onChange={ev =>\n                                        dispatch({\n                                            type: 'config',\n                                            setting: 'showDone',\n                                            value: ev.target.checked\n                                        })\n                                    }\n                                />\n                            }\n                            label='Show finished tasks'\n                        />\n                    </FormControl>\n                    <FormControl>\n                        <FormControlLabel\n                            control={\n                                <Checkbox\n                                    id='showFutureStart'\n                                    checked={!!state.config.showFutureStart}\n                                    onChange={ev =>\n                                        dispatch({\n                                            type: 'config',\n                                            setting: 'showFutureStart',\n                                            value: ev.target.checked\n                                        })\n                                    }\n                                />\n                            }\n                            label='Show tasks with a start date in the future'\n                        />\n                    </FormControl>\n                </Fragment>\n            )}\n        </GlobalState.Consumer>\n    );\n}\n","import React, { useReducer, useContext, useEffect } from 'react';\nimport {\n    HashRouter as Router,\n    Route,\n    Switch,\n    useParams\n} from 'react-router-dom';\nimport './App.css';\nimport { Task } from 'brain-common';\nimport { Guid } from 'guid-typescript';\nimport { TaskEditor } from './components/TaskEditor';\nimport { reduce, Dispatcher } from './util/dispatcher';\nimport { IGlobalState, GlobalState } from './model/GlobalState';\nimport { LocalStorage } from './storage/LocalStorage';\nimport { MainView } from './components/MainView';\nimport { createMuiTheme } from '@material-ui/core';\nimport { green, red } from '@material-ui/core/colors';\nimport { ThemeProvider } from '@material-ui/styles';\nimport { ConfigEditor } from './components/ConfigEditor';\n\nfunction FindTask() {\n    const { id } = useParams();\n    const taskId = id && Guid.parse(id);\n    const state = useContext(GlobalState);\n\n    const task: Task =\n        (taskId && state.tasks.find(t => t.id.equals(taskId))) ||\n        ({ id: Guid.create() } as Task);\n    return <TaskEditor task={task} />;\n}\n\nconst storage = new LocalStorage();\n\nconst theme = createMuiTheme({\n    palette: {\n        primary: green,\n        secondary: red\n    }\n});\n\nconst App: React.FC = () => {\n    const [state, dispatch] = useReducer(reduce.bind(null, storage), {\n        tasks: [] as Task[],\n        contexts: [] as string[],\n        projects: [] as string[],\n        tags: [] as string[],\n        selectedContexts: [] as string[],\n        selectedProjects: [] as string[],\n        selectedTags: [] as string[],\n        config: { showDone: false }\n    } as IGlobalState);\n    useEffect(() => {\n        storage\n            .loadTasks()\n            .then(tasks =>\n                dispatch({ type: 'bulk', subtype: 'load', tasks: tasks })\n            );\n        storage\n            .config()\n            .then(config => dispatch({ type: 'loadConfig', config: config }));\n    }, []);\n    return (\n        <Router>\n            <Dispatcher.Provider value={dispatch}>\n                <GlobalState.Provider value={state}>\n                    <ThemeProvider theme={theme}>\n                        <div className='App'>\n                            <Switch>\n                                <Route exact path={['/', '/inbox', '/someday']}>\n                                    <MainView />\n                                </Route>\n                                <Route path='/task/:id'>\n                                    <FindTask />\n                                </Route>\n                                <Route path='/newTask'>\n                                    <TaskEditor\n                                        task={{\n                                            id: Guid.create(),\n                                            title: '',\n                                            version: 0,\n                                            hash: ''\n                                        }}\n                                        isNew\n                                    />\n                                </Route>\n                                <Route path='/config'>\n                                    <ConfigEditor />\n                                </Route>\n                            </Switch>\n                        </div>\n                    </ThemeProvider>\n                </GlobalState.Provider>\n            </Dispatcher.Provider>\n        </Router>\n    );\n};\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}