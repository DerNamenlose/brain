(this.webpackJsonpbrain=this.webpackJsonpbrain||[]).push([[0],{164:function(e,t,n){e.exports=n(238)},169:function(e,t,n){},170:function(e,t,n){},238:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),c=n.n(o),s=(n(169),n(45)),i=n(13),l=n(68),u=(n(170),n(55)),p=n(27),d=n(274),m=n(275),f=n(5),b=n(303),g=n(278),v=n(59),h=n(270),E=n(242),k=n(280),y=n(281),j=n(282),O=n(283),x=n(298),w=n(286),C=n(287),S=n(276),D=n(277),P=n(279),T=n(137),N=n.n(T),B=n(140),I=n.n(B),F=n(78),A=n.n(F),L=n(138),M=n.n(L),R=n(139),V=n.n(R),z=n(302);function W(e){return r.a.createElement(h.a,Object.assign({startIcon:e.icon},e),r.a.createElement(z.a,{xsDown:!0},e.extended))}var q=n(84),_=n.n(q);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function J(e,t,n){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,Object(p.a)({},t,n))}var U=new Date("9999-12-31").getTime();function H(e){return t=function(e,t){return e.localeCompare(t)},e.sort(t).filter((function(e,n,a){return 0===n||0!==t(a[n-1],e)}));var t}var Y=function(e,t){return function(e,t,n){var a=!0,r=!1,o=void 0;try{for(var c,s=n[Symbol.iterator]();!(a=(c=s.next()).done);a=!0){var i=c.value,l=i(e),u=i(t);if(l!==u)return l>u?1:-1}}catch(p){r=!0,o=p}finally{try{a||null==s.return||s.return()}finally{if(r)throw o}}return 0}(e,t,[function(e){return!!e.done},function(e){return e.due||U},function(e){return e.priority||"Z"},function(e){return e.title.toLocaleLowerCase()}])},Z=n(72),$=n(73),K=function(){function e(){Object(Z.a)(this,e),this._results=[]}return Object($.a)(e,[{key:"hasAnyError",value:function(){return 0!==this._results.length}},{key:"hasError",value:function(e){return-1!==this._results.findIndex((function(t){return t.field===e}))}},{key:"error",value:function(e){var t=this._results.find((function(t){return t.field===e}));return t&&t.message}},{key:"addError",value:function(e,t){this._results.push({field:e,message:t})}}]),e}(),Q=n(62),X=n(304);function ee(e,t){return 0===e.length||t&&t.reduce((function(t,n){return t||!!e.find((function(e){return e===n}))}),!1)}function te(e,t,n,a,r,o){var c=new Date;return c.setHours(0),c.setMinutes(0),c.setSeconds(0),c.setMilliseconds(0),t.filter((function(t){return!t.postponed&&!!t.contexts&&t.contexts.length>0&&(e.showDone||!t.done)&&(e.showFutureStart||!t.start||t.start<=Date.now())&&ee(n,t.contexts)&&ee(a,t.projects)&&ee(r,t.tags)&&function(e,t,n){return void 0===n||!!e.due&&Object(X.a)(e.due,t)<n}(t,c,o)}))}function ne(e,t){return t.filter((function(t){return(e.showFutureStart||!t.start||t.start<=Date.now())&&!t.postponed&&(!t.contexts||0===t.contexts.length)}))}function ae(e){return e.filter((function(e){return!!e.postponed}))}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function oe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ce(e,t,n){var a=oe({},t);switch(a.tasks=Object(Q.a)(t.tasks),n.type){case"context":case"project":case"tag":a=function(e,t){var n=[];switch(t.type){case"context":n=Object(Q.a)(e.selectedContexts);break;case"project":n=Object(Q.a)(e.selectedProjects);break;case"tag":n=Object(Q.a)(e.selectedTags)}switch(t.subtype){case"select":n.push(t.name),n=H(n);break;case"deselect":var a=n.findIndex((function(e){return e===t.name}));-1!==a&&n.splice(a,1)}switch(t.type){case"context":e.selectedContexts=n;break;case"project":e.selectedProjects=n;break;case"tag":e.selectedTags=n}return e}(a,n);break;case"task":a=function(e,t,n){switch(n.subtype){case"create":n.task.created=Date.now(),t.tasks.push(n.task),e.create(n.task);break;case"update":var a=t.tasks.findIndex((function(e){return e.id.equals(n.task.id)}));-1!==a&&t.tasks.splice(a,1,n.task),e.update(n.task);break;case"delete":var r=t.tasks.findIndex((function(e){return e.id.equals(n.task.id)}));-1!==r&&t.tasks.splice(r,1);break;case"load":t.tasks.push(n.task)}return t}(e,a,n);break;case"bulk":a=function(e,t){switch(t.subtype){case"load":e.tasks=e.tasks.concat(t.tasks)}return e}(a,n);break;case"due":a=function(e,t){return"deselect"===t.subtype?e.dueIn=void 0:e.dueIn=t.value,e}(a,n);break;case"config":a=function(e,t,n){return t.config=oe({},t.config,Object(p.a)({},n.setting,n.value)),e.putConfig(t.config),t}(e,a,n);break;case"loadConfig":a.config=n.config}return a.contexts=H(a.tasks.filter((function(e){return!e.done})).flatMap((function(e){return e.contexts||[]}))),a.projects=function(e){return H(e.filter((function(e){return!e.done})).flatMap((function(e){return e.projects||[]})))}(a.tasks),a.tags=function(e){return H(e.filter((function(e){return!e.done})).flatMap((function(e){return e.tags||[]})))}(a.tasks),a.inboxEmpty=0===ne(a.config,a.tasks).length,a.somedayMaybeEmpty=0===ae(a.tasks).length,a}var se=r.a.createContext((function(e){})),ie=r.a.createContext({});function le(e){var t=new Date(e);return t&&t.toISOString().slice(0,10)}function ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ue(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ue(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var de=Object(d.a)((function(e){return Object(m.a)({buttons:{marginLeft:"auto",marginRight:"auto",marginTop:e.spacing(2)},error:{backgroundColor:e.palette.error.main,color:e.palette.error.contrastText,margin:"auto",padding:e.spacing(1)}})})),me=Object(f.a)({root:{backgroundColor:S.a[500]}})(W),fe=Object(f.a)({root:{backgroundColor:D.a[500]}})(W);function be(e){return r.a.createElement(b.a,{open:e.open,"aria-labelledby":"dialog-title"},r.a.createElement(g.a,{id:"dialog-title"},"Activate task?"),r.a.createElement(v.a,null,"This task is currently postponed and will only be visible in Someday/Maybe. Activate it?"),r.a.createElement(h.a,{onClick:function(){return e.onClose(!0)}},"Activate"),r.a.createElement(h.a,{onClick:function(){return e.onClose(!1)}},"Leave postponed"))}function ge(e){var t=new K;return e.title&&""!==e.title||t.addError("title","Task title is required"),t}function ve(e){var t=Object(f.a)((function(t){return{root:{backgroundColor:e.task.done?t.palette.grey[500]:P.a[500],"& .stateText":{textDecoration:e.task.done?"line-through":"none"},margin:t.spacing(1)}}}))(h.a);return r.a.createElement(t,{variant:"contained",color:"primary",onClick:e.onClick},r.a.createElement("span",{className:"stateText"},"Task is ",e.task.done?"done. ":"open. "),r.a.createElement("span",null,e.task.done?"Reopen?":"Finish?"))}function he(e){var t=de(),n=Object(a.useState)(pe({},e.task)),o=Object(s.a)(n,2),c=o[0],i=o[1],l=Object(a.useState)(new K),u=Object(s.a)(l,2),p=u[0],d=u[1],m=Object(a.useState)(!1),f=Object(s.a)(m,2),b=f[0],g=f[1],v=function(e){return function(t){i(J(c,e,t.target.value))}};return r.a.createElement(ie.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement("h1",null,e.isNew?"Create":"Edit"," task"),p.hasAnyError()&&r.a.createElement(E.a,{className:t.error},"Could not save task."),r.a.createElement(k.a,null,r.a.createElement(k.a,{required:!0,error:p.hasError("title")},r.a.createElement(y.a,{htmlFor:"title"},"Title"),r.a.createElement(j.a,{id:"title",placeholder:"Task title",value:c.title||"",onChange:v("title")}),p.hasError("title")&&r.a.createElement(O.a,null,p.error("title"))),r.a.createElement(ve,{task:c,onClick:function(){return i(pe({},c,{done:!c.done}))}}),r.a.createElement(k.a,null,r.a.createElement(y.a,{htmlFor:"Description"},"Description"),r.a.createElement(j.a,{id:"description",multiline:!0,value:c.description||"",placeholder:"Description",onChange:v("description")})),r.a.createElement(_.a,{label:"Contexts",options:H(n.contexts.concat(c.contexts||[])),SelectProps:{isCreatable:!0,isMulti:!0},fullWidth:!0,onChange:function(e){var t=J(c,"contexts",e);i(t)},values:c.contexts}),r.a.createElement(_.a,{label:"Projects",options:H(n.projects.concat(c.projects||[])),SelectProps:{isCreatable:!0,isMulti:!0},fullWidth:!0,onChange:function(e){var t=J(c,"projects",e);i(t)},values:c.projects}),r.a.createElement(_.a,{label:"Tags",options:H(n.tags.concat(c.tags||[])),SelectProps:{isCreatable:!0,isMulti:!0},fullWidth:!0,onChange:function(e){var t=J(c,"tags",e);i(t)},values:c.tags}),r.a.createElement(k.a,null,"Start:",r.a.createElement("input",{id:"start",type:"date",value:c.start&&le(c.start)||"",onChange:function(e){var t=J(c,"start",e.target.valueAsDate&&e.target.valueAsDate.getTime());i(t)}})),r.a.createElement(k.a,null,"Due:",r.a.createElement("input",{id:"due",type:"date",value:c.due&&le(c.due)||"",onChange:function(e){var t=J(c,"due",e.target.valueAsDate&&e.target.valueAsDate.getTime());i(t)}})),r.a.createElement(k.a,null,r.a.createElement(y.a,{htmlFor:"priority"},"Priority"),r.a.createElement(x.a,{id:"priority",value:c.priority||" ",onChange:function(e){return i(J(c,"priority"," "===e.target.value?void 0:e.target.value))}},r.a.createElement(w.a,{value:" "},"[None]"),r.a.createElement(w.a,{value:"A"},"A"),r.a.createElement(w.a,{value:"B"},"B"),r.a.createElement(w.a,{value:"C"},"C"),r.a.createElement(w.a,{value:"D"},"D"),r.a.createElement(w.a,{value:"E"},"E"),r.a.createElement(w.a,{value:"F"},"F"))),r.a.createElement(C.a,{className:t.buttons},r.a.createElement(W,{icon:r.a.createElement(N.a,null),extended:"Save",color:"primary",variant:"contained","aria-label":"Save",onClick:function(){var t=ge(c);t.hasAnyError()?d(t):e.onSave&&e.onSave(c)}}),r.a.createElement(fe,{icon:c.postponed?r.a.createElement(M.a,null):r.a.createElement(A.a,null),extended:c.postponed?"Activate":"Postpone",color:"primary",variant:"contained","aria-label":c.postponed?"Activate":"Postpone",onClick:function(){var t=ge(c);t.hasAnyError()?d(t):e.onPostpone&&e.onPostpone(c)}}),r.a.createElement(me,{icon:r.a.createElement(V.a,null),extended:"Skip task",color:"primary",variant:"contained","aria-label":"Skip task",onClick:function(){e.onSkip&&e.onSkip()},style:{display:e.canSkip?"inline-block":"none"}}),r.a.createElement(W,{icon:r.a.createElement(I.a,null),extended:"Cancel",color:"secondary",variant:"contained","aria-label":"Cancel",onClick:function(){return e.onCancel&&e.onCancel()}}))),r.a.createElement(be,{open:b,onClose:function(t){t&&(c.postponed=!1),e.onSave&&e.onSave(c),g(!1)}}))}))}function Ee(e){var t=Object(i.f)(),n=Object(a.useContext)(se);return r.a.createElement(he,{task:e.task,isNew:e.isNew,onSave:function(a){n({type:"task",subtype:e.isNew?"create":"update",task:a}),t.goBack()},onCancel:function(){return t.goBack()},onPostpone:function(a){a.postponed=!a.postponed,n({type:"task",subtype:e.isNew?"create":"update",task:a}),t.goBack()}})}var ke=n(14),ye=n.n(ke),je=n(29),Oe=n(102),xe=n(142),we=n.n(xe);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(n,!0).forEach((function(t){Object(p.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var De=function(){function e(){Object(Z.a)(this,e)}return Object($.a)(e,[{key:"loadTasks",value:function(){var e=Object(je.a)(ye.a.mark((function e(){var t,n;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDb();case 2:return t=e.sent,e.next=5,t.transaction("tasks").objectStore("tasks").getAll();case 5:return n=e.sent,console.log("Loaded ".concat(n.length," stored tasks")),e.abrupt("return",n.map((function(e){return Se({},e,{id:u.Guid.parse(e.id)})})));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"create",value:function(){var t=Object(je.a)(ye.a.mark((function t(n){var a,r,o;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.updateVersion(Se({},n,{id:n.id.toString()})),t.next=3,this.openDb();case 3:return r=t.sent,o=r.transaction("tasks","readwrite"),t.next=7,o.objectStore("tasks").put(a);case 7:return t.next=9,o.done;case 9:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"update",value:function(){var t=Object(je.a)(ye.a.mark((function t(n){var a,r,o;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.updateVersion(Se({},n,{id:n.id.toString()})),t.next=3,this.openDb();case 3:return r=t.sent,console.log("Updating",a),o=r.transaction("tasks","readwrite"),t.next=8,o.objectStore("tasks").put(a);case 8:return t.next=10,o.done;case 10:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"config",value:function(){var e=Object(je.a)(ye.a.mark((function e(){var t;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDb();case 2:return t=e.sent,e.next=5,t.transaction("config").objectStore("config").get("global");case 5:if(e.t0=e.sent,e.t0){e.next=8;break}e.t0={id:"global",showDone:!1,showFutureStart:!1};case 8:return e.abrupt("return",e.t0);case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"putConfig",value:function(){var e=Object(je.a)(ye.a.mark((function e(t){var n,a;return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.openDb();case 2:return n=e.sent,a=Se({},t,{id:"global"}),e.next=6,n.transaction("config","readwrite").objectStore("config").put(a);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openDb",value:function(){var t=Object(je.a)(ye.a.mark((function t(){var n;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Oe.a)("tasks",3,{upgrade:function(){var t=Object(je.a)(ye.a.mark((function t(n,a,r,o){return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("Upgrading database to version ".concat(r)),a<1&&e.upgradeV1(n),a<2&&e.upgradeV2(o),a<3&&e.upgradeV3(n),console.log("Finished.");case 5:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}()});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}],[{key:"updateVersion",value:function(e){return Se({},e,{version:(e.version||0)+1,hash:we()(e)})}},{key:"upgradeV1",value:function(){var e=Object(je.a)(ye.a.mark((function e(t){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("Creating the object store."),t.createObjectStore("tasks",{keyPath:"id"});case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"upgradeV2",value:function(){var t=Object(je.a)(ye.a.mark((function t(n){var a,r,o,c,s,i,l,u,p;return ye.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Transforming all existing objects to v2 schema"),t.next=3,Object(Oe.a)("tasks",3);case 3:return a=t.sent,t.next=6,a.transaction("tasks","readonly").objectStore("tasks").getAll();case 6:r=t.sent,a.close(),o=!0,c=!1,s=void 0,t.prev=11,i=r[Symbol.iterator]();case 13:if(o=(l=i.next()).done){t.next=21;break}return u=l.value,p=Se({},u,{due:u.due&&u.due.getTime(),created:u.created&&u.created.getTime()||Date.now(),version:0,hash:""}),t.next=18,n.objectStore("tasks").put(e.updateVersion(p));case 18:o=!0,t.next=13;break;case 21:t.next=27;break;case 23:t.prev=23,t.t0=t.catch(11),c=!0,s=t.t0;case 27:t.prev=27,t.prev=28,o||null==i.return||i.return();case 30:if(t.prev=30,!c){t.next=33;break}throw s;case 33:return t.finish(30);case 34:return t.finish(27);case 35:case"end":return t.stop()}}),t,null,[[11,23,27,35],[28,,30,34]])})));return function(e){return t.apply(this,arguments)}}()},{key:"upgradeV3",value:function(){var e=Object(je.a)(ye.a.mark((function e(t){return ye.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.createObjectStore("config",{keyPath:"id"});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Pe=n(273),Te=n(299),Ne=n(294),Be=n(295),Ie=n(148),Fe=n.n(Ie),Ae=n(147),Le=n.n(Ae),Me=n(149),Re=n.n(Me),Ve=n(156),ze=n(241),We=n(292),qe=n(293),_e=n(79),Ge=n.n(_e),Je=n(153),Ue=n(288),He=n(289);function Ye(e){var t=Object(a.useState)(null),n=Object(s.a)(t,2),o=n[0],c=n[1];return r.a.createElement(a.Fragment,null,r.a.createElement(W,{"aria-controls":"simple-menu","aria-haspopup":"true",color:"inherit",icon:e.icon,extended:e.text,onClick:function(e){return c(e.currentTarget)},disabled:0===e.entries.length}),r.a.createElement(Je.a,{id:"contexts-menu",keepMounted:!0,anchorEl:o,open:Boolean(o),onClose:function(e){return c(null)}},e.entries.map((function(t,n){return r.a.createElement(w.a,{key:t.text,onClick:function(){e.onChange&&e.onChange(t),c(null)},selected:t.selected},r.a.createElement(Ue.a,null,e.icon),r.a.createElement(He.a,null,t.text))}))))}var Ze=n(290);function $e(){var e=Object(a.useContext)(se);return r.a.createElement(ie.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:0===t.selectedContexts.length,color:"secondary",variant:"dot"},r.a.createElement(Ge.a,null)),text:"Contexts",entries:t.contexts.map((function(e){return{text:e,selected:!!t.selectedContexts.find((function(t){return t===e}))}})),onChange:function(t){e({type:"context",subtype:t.selected?"deselect":"select",name:t.text})}})}))}var Ke=n(80),Qe=n.n(Ke);function Xe(){var e=Object(a.useContext)(se);return r.a.createElement(ie.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:0===t.selectedProjects.length,color:"secondary",variant:"dot"},r.a.createElement(Qe.a,null)),text:"Projects",entries:t.projects.map((function(e){return{text:e,selected:!!t.selectedProjects.find((function(t){return t===e}))}})),onChange:function(t){e({type:"project",subtype:t.selected?"deselect":"select",name:t.text})}})}))}var et=n(81),tt=n.n(et);function nt(){var e=Object(a.useContext)(se);return r.a.createElement(ie.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:0===t.selectedTags.length,color:"secondary",variant:"dot"},r.a.createElement(tt.a,null)),text:"Tags",entries:t.tags.map((function(e){return{text:e,selected:!!t.selectedTags.find((function(t){return t===e}))}})),onChange:function(t){e({type:"tag",subtype:t.selected?"deselect":"select",name:t.text})}})}))}var at=n(16),rt=n(285),ot=n(99),ct=n(145),st=n.n(ct),it=n(143),lt=n.n(it),ut=n(144),pt=n.n(ut),dt=n(83),mt=n(291),ft=n(82),bt=n(297),gt=Object(d.a)((function(e){return Object(m.a)({done:{textDecoration:"line-through",color:e.palette.grey[500]},metaEntry:{marginLeft:"0.5em",whiteSpace:"nowrap"},metaText:{whiteSpace:"normal"},dueToday:{color:e.palette.primary.main},overdue:{color:e.palette.error.main},priority:{borderRadius:"50%",width:"1em",height:"1em",display:"inline-block",textAlign:"center",paddingBottom:e.spacing(.5),paddingLeft:e.spacing(.25),paddingRight:e.spacing(.25)},prioA:{backgroundColor:dt.a[500],color:e.palette.getContrastText(dt.a[500])},prioB:{backgroundColor:S.a[500],color:e.palette.getContrastText(S.a[500])},prioC:{backgroundColor:D.a[500],color:e.palette.getContrastText(D.a[500])},prioD:{backgroundColor:P.a[500],color:e.palette.getContrastText(P.a[500])},prioE:{backgroundColor:mt.a[200],color:e.palette.getContrastText(mt.a[200])},prioF:{backgroundColor:ft.a[500],color:e.palette.getContrastText(ft.a[500])}})}));function vt(e){var t=gt(),n=new Date(Date.now()).toISOString().slice(0,10),a=e.due&&le(e.due);return!a||a>n?"":a===n?t.dueToday:t.overdue}function ht(e){var t=gt(),n=void 0;switch(e.prio){case"A":n=t.prioA;break;case"B":n=t.prioB;break;case"C":n=t.prioC;break;case"D":n=t.prioD;break;case"E":n=t.prioE;break;case"F":n=t.prioF}return r.a.createElement("span",{className:"".concat(t.priority," ").concat(n)},e.prio)}function Et(e){var t=gt(),n=Object(bt.a)(e.created,new Date);return e.created&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(lt.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Age"),r.a.createElement("span",{className:t.metaText},n," ago"))}function kt(e){var t=gt();return r.a.createElement(a.Fragment,null,e.task.priority&&r.a.createElement(ht,{prio:e.task.priority}),e.task.contexts&&0!==e.task.contexts.length&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(Ge.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Contexts"),r.a.createElement("span",{className:t.metaText},e.task.contexts.join(", ")))," ",e.task.projects&&0!==e.task.projects.length&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(Qe.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Projects"),e.task.projects.join(", "))," ",e.task.tags&&0!==e.task.tags.length&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(tt.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Tags"),r.a.createElement("span",{className:t.metaText},e.task.tags.join(", ")))," ",e.task.start&&r.a.createElement("span",{className:t.metaEntry},r.a.createElement(pt.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Start date"),r.a.createElement("span",{className:t.metaText},new Date(e.task.start).toLocaleDateString()))," ",e.task.due&&r.a.createElement("span",{className:"".concat(t.metaEntry," ").concat(vt(e.task))},r.a.createElement(st.a,{fontSize:"inherit"}),r.a.createElement(v.a,{variant:"srOnly"},"Due date"),r.a.createElement("span",{className:t.metaText},new Date(e.task.due).toLocaleDateString()))," ",e.task.created&&r.a.createElement(Et,{created:new Date(e.task.created),task:e.task}))}function yt(e){var t=gt(),n=Object(i.f)();return r.a.createElement(ot.a,{button:!0,onClick:function(){return n.push("/task/".concat(e.task.id))}},r.a.createElement(He.a,{primary:e.task.title,secondary:r.a.createElement(kt,{task:e.task}),className:e.task.done&&t.done||void 0}))}function jt(e){return r.a.createElement(rt.a,null,e.tasks.sort(Y).map((function(e){return r.a.createElement(yt,{key:e.id.toString(),task:e})})))}var Ot=n(146),xt=n.n(Ot);function wt(){var e=Object(a.useContext)(se);return r.a.createElement(ie.Consumer,null,(function(t){return r.a.createElement(Ye,{icon:r.a.createElement(Ze.a,{invisible:void 0===t.dueIn,color:"secondary",variant:"dot"},r.a.createElement(xt.a,null)),text:"Due",entries:[{text:"Overdue",selected:!(void 0===t.dueIn||0!==t.dueIn),value:0},{text:"Today",selected:!(void 0===t.dueIn||1!==t.dueIn),value:1},{text:"Next week",selected:!(void 0===t.dueIn||7!==t.dueIn),value:7},{text:"Next month",selected:!(void 0===t.dueIn||31!==t.dueIn),value:31}],onChange:function(t){e({type:"due",subtype:t.selected?"deselect":"select",value:t.value})}})}))}var Ct=n(54),St=n.n(Ct),Dt=Object(d.a)((function(e){return Object(m.a)({appBar:{top:"auto",bottom:0},search:Object(p.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(at.b)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(at.b)(e.palette.common.white,.25)},marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:e.spacing(1),width:"auto"}),searchIcon:{width:e.spacing(7),height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit"},inputInput:Object(p.a)({padding:e.spacing(1,1,1,7),transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("sm"),{width:120,"&:focus":{width:200}}),task:{margin:2},settings:{marginLeft:"auto",marginRight:0}})}));function Pt(){var e=Dt(),t=Object(i.f)();return r.a.createElement(ie.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement(We.a,{className:e.appBar},r.a.createElement(qe.a,null,r.a.createElement($e,null),r.a.createElement(Xe,null),r.a.createElement(nt,null),r.a.createElement(wt,null),r.a.createElement(h.a,{className:e.settings,onClick:function(){return t.push("/config")}},r.a.createElement(St.a,{className:e.settings})))),r.a.createElement(jt,{tasks:te(n.config,n.tasks,n.selectedContexts,n.selectedProjects,n.selectedTags,n.dueIn)}))}))}var Tt=Object(d.a)((function(){return Object(m.a)({appBar:{top:"auto",bottom:0},settings:{marginLeft:"auto",marginRight:0}})}));function Nt(){var e=Tt(),t=Object(i.f)();return r.a.createElement(ie.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement(jt,{tasks:ne(n.config,n.tasks)}),r.a.createElement(We.a,{className:e.appBar},r.a.createElement(qe.a,null,r.a.createElement(h.a,{className:e.settings,onClick:function(){return t.push("/config")}},r.a.createElement(St.a,{className:e.settings})))))}))}var Bt=Object(Ve.a)((function(){return Object(ze.a)({appBar:{top:"auto",bottom:0},settings:{marginLeft:"auto",marginRight:0}})}));function It(){var e=Bt(),t=Object(i.f)();return r.a.createElement(ie.Consumer,null,(function(n){return r.a.createElement(a.Fragment,null,r.a.createElement(jt,{tasks:ae(n.tasks)}),r.a.createElement(We.a,{className:e.appBar},r.a.createElement(qe.a,null,r.a.createElement(h.a,{className:e.settings,onClick:function(){return t.push("/config")}},r.a.createElement(St.a,{className:e.settings})))))}))}function Ft(e){return r.a.createElement(v.a,{component:"div",role:"tabpanel",id:"full-width-tabpanel-".concat(e.index)},e.children)}var At=Object(Ve.a)((function(e){return Object(ze.a)({addButton:{position:"fixed",zIndex:1,bottom:75,left:0,right:0,marginLeft:"auto",marginRight:10},tabs:{position:"fixed",top:0,left:0,width:"100%",zIndex:1},tabPanel:{position:"absolute",top:0,left:0,bottom:0,right:0,overflowY:"auto"},smallBorder:{marginTop:e.spacing(6),marginBottom:e.spacing(6)},normalBorder:{marginTop:e.spacing(9),marginBottom:e.spacing(8)}})}));function Lt(e){var t=Object(i.f)(),n=At(),a=Object(Pe.a)((function(e){return e.breakpoints.down("xs")}));return r.a.createElement(Te.a,{variant:"fullWidth",indicatorColor:"primary",value:e.path,className:n.tabs},r.a.createElement(Ne.a,{icon:r.a.createElement(Le.a,null),label:a?void 0:"Tasks","aria-label":"Tasks",value:"/",onClick:function(e){return t.push("/")}}),r.a.createElement(Ne.a,{icon:r.a.createElement(Fe.a,null),label:a?void 0:"Inbox","aria-label":"Inbox",disabled:e.inboxEmpty,value:"/inbox",onClick:function(e){return t.push("/inbox")}}),r.a.createElement(Ne.a,{icon:r.a.createElement(A.a,null),label:a?void 0:"Someday/Maybe","aria-label":"Inbox",disabled:e.somedayMaybeEmpty,value:"/someday",onClick:function(e){return t.push("/someday")}}))}function Mt(){var e=At(),t=Object(Pe.a)((function(e){return e.breakpoints.down("xs")}));return r.a.createElement("div",{className:"".concat(e.tabPanel," ").concat(t?e.smallBorder:e.normalBorder)},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/"},r.a.createElement(Ft,{index:0},r.a.createElement(Pt,null))),r.a.createElement(i.a,{path:"/inbox"},r.a.createElement(Ft,{index:1},r.a.createElement(Nt,null))),r.a.createElement(i.a,{path:"/someday"},r.a.createElement(Ft,{index:2},r.a.createElement(It,null)))))}function Rt(){var e=Object(i.f)(),t=At();return r.a.createElement(ie.Consumer,null,(function(n){return r.a.createElement(i.a,{render:function(o){return r.a.createElement(a.Fragment,null,r.a.createElement(Lt,{path:o.location.pathname,inboxEmpty:n.inboxEmpty,somedayMaybeEmpty:n.somedayMaybeEmpty}),r.a.createElement(Mt,null),r.a.createElement(Be.a,{color:"secondary","aria-label":"add",className:t.addButton,onClick:function(){return e.push("/newTask")}},r.a.createElement(Re.a,null)))}})}))}var Vt=n(151),zt=n(284),Wt=n(296),qt=n(300),_t=n(150),Gt=n.n(_t),Jt=Object(Ve.a)((function(e){return Object(ze.a)({backButton:{marginLeft:0,marginRight:"auto"},backButtonRoot:{display:"flex"}})}));function Ut(){var e=Jt(),t=Object(a.useContext)(se),n=Object(i.f)();return r.a.createElement(ie.Consumer,null,(function(o){return r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:e.backButtonRoot},r.a.createElement(h.a,{className:e.backButton,onClick:function(){return n.goBack()}},r.a.createElement(Gt.a,{fontSize:"large"}))),r.a.createElement("h1",null,"Configuration"),r.a.createElement(k.a,null,r.a.createElement(Wt.a,{control:r.a.createElement(qt.a,{id:"showDone",checked:o.config.showDone,onChange:function(e){return t({type:"config",setting:"showDone",value:e.target.checked})}}),label:"Show finished tasks"})),r.a.createElement(k.a,null,r.a.createElement(Wt.a,{control:r.a.createElement(qt.a,{id:"showFutureStart",checked:!!o.config.showFutureStart,onChange:function(e){return t({type:"config",setting:"showFutureStart",value:e.target.checked})}}),label:"Show tasks with a start date in the future"})))}))}function Ht(){var e=Object(i.g)().id,t=e&&u.Guid.parse(e),n=Object(a.useContext)(ie),o=t&&n.tasks.find((function(e){return e.id.equals(t)}))||{id:u.Guid.create()};return r.a.createElement(Ee,{task:o})}var Yt=new De,Zt=Object(Vt.a)({palette:{primary:P.a,secondary:dt.a}}),$t=function(){var e=Object(a.useReducer)(ce.bind(null,Yt),{tasks:[],contexts:[],projects:[],tags:[],selectedContexts:[],selectedProjects:[],selectedTags:[],config:{showDone:!1}}),t=Object(s.a)(e,2),n=t[0],o=t[1];return Object(a.useEffect)((function(){Yt.loadTasks().then((function(e){return o({type:"bulk",subtype:"load",tasks:e})})),Yt.config().then((function(e){return o({type:"loadConfig",config:e})}))}),[]),r.a.createElement(l.a,null,r.a.createElement(se.Provider,{value:o},r.a.createElement(ie.Provider,{value:n},r.a.createElement(zt.a,{theme:Zt},r.a.createElement("div",{className:"App"},r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:["/","/inbox","/someday"]},r.a.createElement(Rt,null)),r.a.createElement(i.a,{path:"/task/:id"},r.a.createElement(Ht,null)),r.a.createElement(i.a,{path:"/newTask"},r.a.createElement(Ee,{task:{id:u.Guid.create(),title:"",version:0,hash:""},isNew:!0})),r.a.createElement(i.a,{path:"/config"},r.a.createElement(Ut,null))))))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement($t,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[164,1,2]]]);
//# sourceMappingURL=main.68bce651.chunk.js.map